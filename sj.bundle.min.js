"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(u){o=!0,i=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(e){function t(e,t,r){var n=t.match(/^([$a-zA-Z][a-zA-Z0-9_-]*)(.*)$/);if(n){var o=n[1],i=n[2];return u("rest: "+i),[e[o],i]}}function r(e,n,o){u("parsePath: "+n);var i=n.match(/^([$a-zA-Z][a-zA-Z0-9_-]*)\.(.*)$/);if(i){var a=i[1],s=i[2];return u("parsePath: "+a+", "+s),r(e[a],s,o)}return t(e,n,o)}function n(e,t,r){var n=t.match(/^([1-9][0-9]*(?:\.[0-9]+)?)(.*)$/);return n?(u("parseNumber: "+t+". "+n+". ok"),[parseFloat(n[1],10),n[2]]):void u("parseNumber: "+t+". fail")}function o(e,t,o){var i=r(e,t,o);return i?i:n(e,t,o)}function i(e,t,r){if(t.startsWith("(")){t=t.substr(1);for(var n=[];;){var o=a(e,t,r);if(!o){u("No param: '"+t+"'");break}if(t=o[1],u("Got param: '"+o+"'"),n.push(o[0]),t=t.replace(/^\s*/,""),!t.startsWith(",")){u("No more comma. break. "+t);break}t=t.substr(1),t=t.replace(/^\s*/,"")}if(t=t.replace(/^\s*/,""),!t.startsWith(")"))throw"Paren missmatch: '"+t+"': '"+r+"'";if(t=t.substr(1),t=t.replace(/^\s*/,""),t.length>0)throw"There's trailing trash: "+r;return[n,t]}}function a(e,t,r){if(!t)throw"Missing path";var n=o(e,t,r);if(n){var a=_slicedToArray(n,2),s=a[0],c=a[1];if(c){u("got:"+s+", "+c);var d=i(e,c,r);return d?(u("apply: "+c),[s.apply(void 0,d[0]),d[1]]):[s,c]}return[s,c]}}function s(e,t){if(!t)throw"Missing path";u("getValueByPath: "+t);var r=a(e,t,t);if(r){if(r[1])throw"Trailing trash: '"+r[1]+"' in '"+t+"'";return r[0]}}var u=function(e){};e.sjExpression={getValueByPath:s}}("undefined"!=typeof global?global:window),"undefined"==typeof WeakMap&&!function(){var e=Object.defineProperty,t=Date.now()%1e9,r=function(){this.name="__st"+(1e9*Math.random()>>>0)+(t++ +"__")};r.prototype={set:function(t,r){var n=t[this.name];return n&&n[0]===t?n[1]=r:e(t,this.name,{value:[t,r],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},"delete":function(e){var t=e[this.name];return t&&t[0]===e?(t[0]=t[1]=void 0,!0):!1},has:function(e){var t=e[this.name];return t?t[0]===e:!1}},window.WeakMap=r}(),function(e){function t(e){w.push(e),_||(_=!0,v(n))}function r(e){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(e)||e}function n(){_=!1;var e=w;w=[],e.sort(function(e,t){return e.uid_-t.uid_});var t=!1;e.forEach(function(e){var r=e.takeRecords();o(e),r.length&&(e.callback_(r,e),t=!0)}),t&&n()}function o(e){e.nodes_.forEach(function(t){var r=m.get(t);r&&r.forEach(function(t){t.observer===e&&t.removeTransientObservers()})})}function i(e,t){for(var r=e;r;r=r.parentNode){var n=m.get(r);if(n)for(var o=0;o<n.length;o++){var i=n[o],a=i.options;if(r===e||a.subtree){var s=t(a);s&&i.enqueue(s)}}}}function a(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++g}function s(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function u(e){var t=new s(e.type,e.target);return t.addedNodes=e.addedNodes.slice(),t.removedNodes=e.removedNodes.slice(),t.previousSibling=e.previousSibling,t.nextSibling=e.nextSibling,t.attributeName=e.attributeName,t.attributeNamespace=e.attributeNamespace,t.oldValue=e.oldValue,t}function c(e,t){return O=new s(e,t)}function d(e){return E?E:(E=u(O),E.oldValue=e,E)}function l(){O=E=void 0}function f(e){return e===E||e===O}function h(e,t){return e===t?e:E&&f(e)?E:null}function p(e,t,r){this.observer=e,this.target=t,this.options=r,this.transientObservedNodes=[]}if(!e.JsMutationObserver){var v,m=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))v=setTimeout;else if(window.setImmediate)v=window.setImmediate;else{var b=[],y=String(Math.random());window.addEventListener("message",function(e){if(e.data===y){var t=b;b=[],t.forEach(function(e){e()})}}),v=function(e){b.push(e),window.postMessage(y,"*")}}var _=!1,w=[],g=0;a.prototype={observe:function(e,t){if(e=r(e),!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var n=m.get(e);n||m.set(e,n=[]);for(var o,i=0;i<n.length;i++)if(n[i].observer===this){o=n[i],o.removeListeners(),o.options=t;break}o||(o=new p(this,e,t),n.push(o),this.nodes_.push(e)),o.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=m.get(e),r=0;r<t.length;r++){var n=t[r];if(n.observer===this){n.removeListeners(),t.splice(r,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}};var O,E;p.prototype={enqueue:function(e){var r=this.observer.records_,n=r.length;if(r.length>0){var o=r[n-1],i=h(o,e);if(i)return void(r[n-1]=i)}else t(this.observer);r[n]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=m.get(e);t||m.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=m.get(e),r=0;r<t.length;r++)if(t[r]===this){t.splice(r,1);break}},this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,r=e.relatedNode.namespaceURI,n=e.target,o=new c("attributes",n);o.attributeName=t,o.attributeNamespace=r;var a=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;i(n,function(e){return!e.attributes||e.attributeFilter&&e.attributeFilter.length&&-1===e.attributeFilter.indexOf(t)&&-1===e.attributeFilter.indexOf(r)?void 0:e.attributeOldValue?d(a):o});break;case"DOMCharacterDataModified":var n=e.target,o=c("characterData",n),a=e.prevValue;i(n,function(e){return e.characterData?e.characterDataOldValue?d(a):o:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var s,u,f=e.target;"DOMNodeInserted"===e.type?(s=[f],u=[]):(s=[],u=[f]);var h=f.previousSibling,p=f.nextSibling,o=c("childList",e.target.parentNode);o.addedNodes=s,o.removedNodes=u,o.previousSibling=h,o.nextSibling=p,i(e.relatedNode,function(e){return e.childList?o:void 0})}l()}},e.JsMutationObserver=a,e.MutationObserver||(e.MutationObserver=a,a._isPolyfilled=!0)}}(self),function(e){if(!window.performance){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}window.requestAnimationFrame||(window.requestAnimationFrame=function(){var e=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return e?function(t){return e(function(){t(performance.now())})}:function(e){return window.setTimeout(e,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(){return window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}}());var r=function(){var e=document.createEvent("Event");return e.initEvent("foo",!0,!0),e.preventDefault(),e.defaultPrevented}();if(!r){var n=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(n.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var o=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||o&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(e,t){t=t||{};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),r},window.CustomEvent.prototype=window.Event.prototype),!window.Event||o&&"function"!=typeof window.Event){var i=window.Event;window.Event=function(e,t){t=t||{};var r=document.createEvent("Event");return r.initEvent(e,Boolean(t.bubbles),Boolean(t.cancelable)),r},window.Event.prototype=i.prototype}}(window.WebComponents),window.CustomElements=window.CustomElements||{flags:{}},function(e){var t=e.flags,r=[],n=function(e){r.push(e)},o=function(){r.forEach(function(t){t(e)})};e.addModule=n,e.initializeModules=o,e.hasNative=Boolean(document.registerElement),e.isIE=/Trident/.test(navigator.userAgent),e.useNative=!t.register&&e.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(e){function t(e,t){r(e,function(e){return t(e)?!0:void n(e,t)}),n(e,t)}function r(e,t,n){var o=e.firstElementChild;if(!o)for(o=e.firstChild;o&&o.nodeType!==Node.ELEMENT_NODE;)o=o.nextSibling;for(;o;)t(o,n)!==!0&&r(o,t,n),o=o.nextElementSibling;return null}function n(e,r){for(var n=e.shadowRoot;n;)t(n,r),n=n.olderShadowRoot}function o(e,t){i(e,t,[])}function i(e,t,r){if(e=window.wrap(e),!(r.indexOf(e)>=0)){r.push(e);for(var n,o=e.querySelectorAll("link[rel="+a+"]"),s=0,u=o.length;u>s&&(n=o[s]);s++)n["import"]&&i(n["import"],t,r);t(e)}}var a=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";e.forDocumentTree=o,e.forSubtree=t}),window.CustomElements.addModule(function(e){function t(e,t){return r(e,t)||n(e,t)}function r(t,r){return e.upgrade(t,r)?!0:void(r&&a(t))}function n(e,t){_(e,function(e){return r(e,t)?!0:void 0})}function o(e){E.push(e),O||(O=!0,setTimeout(i))}function i(){O=!1;for(var e,t=E,r=0,n=t.length;n>r&&(e=t[r]);r++)e();E=[]}function a(e){g?o(function(){s(e)}):s(e)}function s(e){e.__upgraded__&&!e.__attached&&(e.__attached=!0,e.attachedCallback&&e.attachedCallback())}function u(e){c(e),_(e,function(e){c(e)})}function c(e){g?o(function(){d(e)}):d(e)}function d(e){e.__upgraded__&&e.__attached&&(e.__attached=!1,e.detachedCallback&&e.detachedCallback())}function l(e){for(var t=e,r=window.wrap(document);t;){if(t==r)return!0;t=t.parentNode||t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host}}function f(e){if(e.shadowRoot&&!e.shadowRoot.__watched){y.dom&&console.log("watching shadow-root for: ",e.localName);for(var t=e.shadowRoot;t;)v(t),t=t.olderShadowRoot}}function h(e,r){if(y.dom){var n=r[0];if(n&&"childList"===n.type&&n.addedNodes&&n.addedNodes){for(var o=n.addedNodes[0];o&&o!==document&&!o.host;)o=o.parentNode;var i=o&&(o.URL||o._URL||o.host&&o.host.localName)||"";i=i.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",r.length,i||"")}var a=l(e);r.forEach(function(e){"childList"===e.type&&(C(e.addedNodes,function(e){e.localName&&t(e,a)}),C(e.removedNodes,function(e){e.localName&&u(e)}))}),y.dom&&console.groupEnd()}function p(e){for(e=window.wrap(e),e||(e=window.wrap(document));e.parentNode;)e=e.parentNode;var t=e.__observer;t&&(h(e,t.takeRecords()),i())}function v(e){if(!e.__observer){var t=new MutationObserver(h.bind(this,e));t.observe(e,{childList:!0,subtree:!0}),e.__observer=t}}function m(e){e=window.wrap(e),y.dom&&console.group("upgradeDocument: ",e.baseURI.split("/").pop());var r=e===window.wrap(document);t(e,r),v(e),y.dom&&console.groupEnd()}function b(e){w(e,m)}var y=e.flags,_=e.forSubtree,w=e.forDocumentTree,g=window.MutationObserver._isPolyfilled&&y["throttle-attached"];e.hasPolyfillMutations=g,e.hasThrottledAttached=g;var O=!1,E=[],C=Array.prototype.forEach.call.bind(Array.prototype.forEach),x=Element.prototype.createShadowRoot;x&&(Element.prototype.createShadowRoot=function(){var e=x.call(this);return window.CustomElements.watchShadow(this),e}),e.watchShadow=f,e.upgradeDocumentTree=b,e.upgradeDocument=m,e.upgradeSubtree=n,e.upgradeAll=t,e.attached=a,e.takeRecords=p}),window.CustomElements.addModule(function(e){function t(t,n){if("template"===t.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(t),!t.__upgraded__&&t.nodeType===Node.ELEMENT_NODE){var o=t.getAttribute("is"),i=e.getRegisteredDefinition(t.localName)||e.getRegisteredDefinition(o);if(i&&(o&&i.tag==t.localName||!o&&!i["extends"]))return r(t,i,n)}}function r(t,r,o){return a.upgrade&&console.group("upgrade:",t.localName),r.is&&t.setAttribute("is",r.is),n(t,r),t.__upgraded__=!0,i(t),o&&e.attached(t),e.upgradeSubtree(t,o),a.upgrade&&console.groupEnd(),t}function n(e,t){Object.__proto__?e.__proto__=t.prototype:(o(e,t.prototype,t["native"]),e.__proto__=t.prototype)}function o(e,t,r){for(var n={},o=t;o!==r&&o!==HTMLElement.prototype;){for(var i,a=Object.getOwnPropertyNames(o),s=0;i=a[s];s++)n[i]||(Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(o,i)),n[i]=1);o=Object.getPrototypeOf(o)}}function i(e){e.createdCallback&&e.createdCallback()}var a=e.flags;e.upgrade=t,e.upgradeWithDefinition=r,e.implementPrototype=n}),window.CustomElements.addModule(function(e){function t(t,n){var u=n||{};if(!t)throw new Error("document.registerElement: first argument `name` must not be empty");if(t.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(t)+"'.");if(o(t))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(t)+"'. The type name is invalid.");if(c(t))throw new Error("DuplicateDefinitionError: a type with name '"+String(t)+"' is already registered");return u.prototype||(u.prototype=Object.create(HTMLElement.prototype)),u.__name=t.toLowerCase(),u["extends"]&&(u["extends"]=u["extends"].toLowerCase()),u.lifecycle=u.lifecycle||{},u.ancestry=i(u["extends"]),a(u),s(u),r(u.prototype),d(u.__name,u),u.ctor=l(u),u.ctor.prototype=u.prototype,u.prototype.constructor=u.ctor,e.ready&&m(document),u.ctor}function r(e){if(!e.setAttribute._polyfilled){var t=e.setAttribute;e.setAttribute=function(e,r){n.call(this,e,r,t)};var r=e.removeAttribute;e.removeAttribute=function(e){n.call(this,e,null,r)},e.setAttribute._polyfilled=!0}}function n(e,t,r){e=e.toLowerCase();var n=this.getAttribute(e);r.apply(this,arguments);var o=this.getAttribute(e);this.attributeChangedCallback&&o!==n&&this.attributeChangedCallback(e,n,o)}function o(e){for(var t=0;t<g.length;t++)if(e===g[t])return!0}function i(e){var t=c(e);return t?i(t["extends"]).concat([t]):[]}function a(e){for(var t,r=e["extends"],n=0;t=e.ancestry[n];n++)r=t.is&&t.tag;e.tag=r||e.__name,r&&(e.is=e.__name)}function s(e){if(!Object.__proto__){var t=HTMLElement.prototype;if(e.is){var r=document.createElement(e.tag);t=Object.getPrototypeOf(r)}for(var n,o=e.prototype,i=!1;o;)o==t&&(i=!0),n=Object.getPrototypeOf(o),n&&(o.__proto__=n),o=n;i||console.warn(e.tag+" prototype not found in prototype chain for "+e.is),e["native"]=t}}function u(e){return y(C(e.tag),e)}function c(e){return e?O[e.toLowerCase()]:void 0}function d(e,t){O[e]=t}function l(e){return function(){return u(e)}}function f(e,t,r){return e===E?h(t,r):x(e,t)}function h(e,t){e&&(e=e.toLowerCase()),t&&(t=t.toLowerCase());var r=c(t||e);if(r){if(e==r.tag&&t==r.is)return new r.ctor;if(!t&&!r.is)return new r.ctor}var n;return t?(n=h(e),n.setAttribute("is",t),n):(n=C(e),e.indexOf("-")>=0&&_(n,HTMLElement),n)}function p(e,t){var r=e[t];e[t]=function(){var e=r.apply(this,arguments);return b(e),e}}var v,m=(e.isIE,e.upgradeDocumentTree),b=e.upgradeAll,y=e.upgradeWithDefinition,_=e.implementPrototype,w=e.useNative,g=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],O={},E="http://www.w3.org/1999/xhtml",C=document.createElement.bind(document),x=document.createElementNS.bind(document);v=Object.__proto__||w?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;for(var r=e;r;){if(r===t.prototype)return!0;r=r.__proto__}return!1},p(Node.prototype,"cloneNode"),p(document,"importNode"),document.registerElement=t,document.createElement=h,document.createElementNS=f,e.registry=O,e["instanceof"]=v,e.reservedTagList=g,e.getRegisteredDefinition=c,document.register=document.registerElement}),function(e){function t(){i(window.wrap(document)),window.CustomElements.ready=!0;var e=window.requestAnimationFrame||function(e){setTimeout(e,16)};e(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var r=e.useNative,n=e.initializeModules;e.isIE;if(r){var o=function(){};e.watchShadow=o,e.upgrade=o,e.upgradeAll=o,e.upgradeDocumentTree=o,e.upgradeSubtree=o,e.takeRecords=o,e["instanceof"]=function(e,t){return e instanceof t}}else n();var i=e.upgradeDocumentTree,a=e.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(e){return e}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(e){e["import"]&&a(wrap(e["import"]))}),"complete"===document.readyState||e.flags.eager)t();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var s=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(s,t)}else t()}(window.CustomElements);var _slicedToArray=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(u){o=!0,i=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();!function(e){function t(e){return e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement}var r={"sj-click":"onclick","sj-blur":"onblur","sj-checked":"onchecked","sj-dblclick":"ondblclick","sj-focus":"onfocus","sj-keydown":"onkeydown","sj-keypress":"onkeypress","sj-keyup":"onkeyup","sj-mousedown":"onmousedown","sj-mouseenter":"onmouseenter","sj-mouseleave":"onmouseleave","sj-mousemove":"onmousemove","sj-mouseover":"onmouseover","sj-mouseup":"onmouseup","sj-paste":"onpaste","sj-selected":"onselected","sj-submit":"onsubmit"};if("function"!=typeof HTMLElement){var n=function(){};n.prototype=HTMLElement.prototype,HTMLElement=n}var o=function(){function e(t,r,n,o){_classCallCheck(this,e),this.renderer=t,this.element=r,this.scope=n,this.varName=o}return _createClass(e,[{key:"render",value:function(){var e=0,t=!0,r=!1,n=void 0;try{for(var o,i=this.scope[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=Object.assign({},this.scope);s[this.varName]=a,s.$index=e++,this.renderer(this.element,s)}}catch(u){r=!0,n=u}finally{try{!t&&i["return"]&&i["return"]()}finally{if(r)throw n}}}}]),e}(),i=function(){function e(t,r,n){_classCallCheck(this,e),this.targetElement=t,this.templateElement=r,this.scope=n}return _createClass(e,[{key:"render",value:function(){var e=this;if(!this.rendering)try{this.rendering=!0,console.log(this),IncrementalDOM.patch(this.targetElement,function(){console.log(e);for(var t=e.templateElement.children,r=0;r<t.length;++r)e.renderDOM(t[r],e.scope)})}finally{this.rendering=!1}}},{key:"renderDOM",value:function(e,r){if(e.nodeType===Node.TEXT_NODE)return void IncrementalDOM.text(this.replaceVariables(e.textContent,r));if(!this.shouldHideElement(e,r)){var n=e.tagName.toLowerCase();IncrementalDOM.elementOpenStart(n);var o=this.renderAttributes(e,r),i=_slicedToArray(o,2),a=i[0],s=i[1],u=a?sjExpression.getValueByPath(r,a):null,c=t(e);a&&u&&r[a]&&c&&IncrementalDOM.attr("value",u),IncrementalDOM.elementOpenEnd(n);var d=e.childNodes;if(s)s.render();else for(var l=0,f=d.length;f>l;++l){var h=d[l];h.nodeType===Node.TEXT_NODE?a||IncrementalDOM.text(this.replaceVariables(h.textContent,r)):this.renderDOM(h,r)}a&&u&&!c&&IncrementalDOM.text(u),IncrementalDOM.elementClose(n)}}},{key:"shouldHideElement",value:function(e,t){var r=e.getAttribute("sj-if");if(r){var n=sjExpression.getValueByPath(t,r);if(!n)return!0}return!1}},{key:"renderAttributes",value:function(e,t){for(var r=void 0,n=e.attributes,o=void 0,i=0,a=n.length;a>i;++i){var s=n[i],u=s.name,c=void 0,d=this.renderAttribute(u,s,e,t),l=_slicedToArray(d,2);c=l[0],o=l[1],c&&(r=s.value)}return[r,o]}},{key:"renderAttribute",value:function(e,t,n,i){var a=this,s=void 0,u=void 0;if(e.startsWith("sj-")){var c=r[e];if(c)IncrementalDOM.attr(c,function(e){var r=Object.assign({},i);r.$event=e,sjExpression.getValueByPath(r,t.value)});else if("sj-model"===t.name)s=t.value,IncrementalDOM.attr("onchange",function(e){i[t.value]=e.target.value,a.render()}),i[t.value]||(i[t.value]=n.value);else if("sj-repeat"===t.name){var d=t.value.match(/^\s*(\w+)\s+in\s+(\w+)\s*$/);if(!d)throw"Invalid sj-repeat value: "+d;var l=d[1],f=d[2],h=n.querySelector("*");u=new o(function(e,t){a.renderDOM(e,t)},h,i[f],l)}}else{var p=this.replaceVariables(t.value,i);IncrementalDOM.attr(t.name,p)}return[s,u]}},{key:"replaceVariables",value:function(e,t){return e.replace(/\{\{([$A-Za-z0-9_.-]+)\}\}/g,function(e,r){return"$_"===r?JSON.stringify(t):sjExpression.getValueByPath(t,r)})}}]),e}(),a=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"createdCallback",value:function(){this.scope={};var e=this.template(),t=document.createElement("div");t.innerHTML=e,this.renderer=new i(this,t,this.scope),this.initialize(),this.update()}},{key:"template",value:function(){throw"Please implement 'template' method"}},{key:"initialize",value:function(){}},{key:"update",value:function(){this.renderer.render()}}]),t}(HTMLElement);e.SJElement=a}("undefined"!=typeof global?global:window),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.IncrementalDOM={})}(this,function(e){function t(e,t){this.attrs=a(),this.attrsArr=[],this.newAttrs=a(),this.key=t,this.keyMap=null,this.keyMapValid=!0,this.nodeName=e,this.text=null}function r(){this.created=C.nodesCreated&&[],this.deleted=C.nodesDeleted&&[]}var n=Object.prototype.hasOwnProperty,o=Object.create,i=function(e,t){return n.call(e,t)},a=function(){return o(null)},s=function(e,r,n){var o=new t(r,n);return e.__incrementalDOMData=o,o},u=function(e){var t=e.__incrementalDOMData;if(!t){var r=e.nodeName.toLowerCase(),n=null;e instanceof Element&&(n=e.getAttribute("key")),t=s(e,r,n)}return t},c={"default":"__default",placeholder:"__placeholder"},d=function(e){return 0===e.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===e.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":void 0},l=function(e,t,r){if(null==r)e.removeAttribute(t);else{var n=d(t);n?e.setAttributeNS(n,t,r):e.setAttribute(t,r)}},f=function(e,t,r){e[t]=r},h=function(e,t,r){if("string"==typeof r)e.style.cssText=r;else{e.style.cssText="";var n=e.style,o=r;for(var a in o)i(o,a)&&(n[a]=o[a])}},p=function(e,t,r){var n=typeof r;"object"===n||"function"===n?f(e,t,r):l(e,t,r)},v=function(e,t,r){var n=u(e),o=n.attrs;if(o[t]!==r){var i=m[t]||m[c["default"]];i(e,t,r),o[t]=r}},m=a();m[c["default"]]=p,m[c.placeholder]=function(){},m.style=h;var b=function(e,t){return"svg"===e?"http://www.w3.org/2000/svg":"foreignObject"===u(t).nodeName?null:t.namespaceURI},y=function(e,t,r,n,o){var i=b(r,t),a=void 0;if(a=i?e.createElementNS(i,r):e.createElement(r),s(a,r,n),o)for(var u=0;u<o.length;u+=2)v(a,o[u],o[u+1]);return a},_=function(e){var t=e.createTextNode("");return s(t,"#text",null),t},w=function(e){for(var t=a(),r=e.firstElementChild;r;){var n=u(r).key;n&&(t[n]=r),r=r.nextElementSibling}return t},g=function(e){var t=u(e);return t.keyMap||(t.keyMap=w(e)),t.keyMap},O=function(e,t){return t?g(e)[t]:null},E=function(e,t,r){g(e)[t]=r},C={nodesCreated:null,nodesDeleted:null};r.prototype.markCreated=function(e){this.created&&this.created.push(e)},r.prototype.markDeleted=function(e){this.deleted&&this.deleted.push(e)},r.prototype.notifyChanges=function(){this.created&&this.created.length>0&&C.nodesCreated(this.created),this.deleted&&this.deleted.length>0&&C.nodesDeleted(this.deleted)};var x=null,T=null,k=null,j=null,D=null,M=function(e){var t=function(t,n,o){var i=x,a=j,s=D,u=T,c=k;x=new r,j=t,D=t.ownerDocument,k=t.parentNode,e(t,n,o),x.notifyChanges(),x=i,j=a,D=s,T=u,k=c};return t},N=M(function(e,t,r){T=e,I(),t(r),F()}),A=M(function(e,t,r){T={nextSibling:e},t(r)}),P=function(e,t){var r=u(T);return e===r.nodeName&&t==r.key},S=function(e,t,r){if(!T||!P(e,t)){var n=void 0;t&&(n=O(k,t)),n||(n="#text"===e?_(D):y(D,k,e,t,r),t&&E(k,t,n),x.markCreated(n)),T&&u(T).key?(k.replaceChild(n,T),u(k).keyMapValid=!1):k.insertBefore(n,T),T=n}},L=function(){var e=k,t=u(e),r=t.keyMap,n=t.keyMapValid,o=e.lastChild,i=void 0;if(!(o===T&&n||t.attrs[c.placeholder]&&e!==j)){for(;o!==T;)e.removeChild(o),x.markDeleted(o),i=u(o).key,i&&delete r[i],o=e.lastChild;if(!n){for(i in r)o=r[i],o.parentNode!==e&&(x.markDeleted(o),delete r[i]);t.keyMapValid=!0}}},I=function(){k=T,T=null},R=function(){T=T?T.nextSibling:k.firstChild},F=function(){L(),T=k,k=k.parentNode},V=function(e,t,r){return R(),S(e,t,r),I(),k},H=function(){return F(),T},B=function(){return R(),S("#text",null,null),T},U=function(){return k},q=function(){T=k.lastChild},z=3,$=[],W=function(e,t,r,n){for(var o=V(e,t,r),i=u(o),a=i.attrsArr,s=i.newAttrs,c=!1,d=z,l=0;d<arguments.length;d+=1,l+=1)if(a[l]!==arguments[d]){c=!0;break}for(;d<arguments.length;d+=1,l+=1)a[l]=arguments[d];if(l<a.length&&(c=!0,a.length=l),c){for(d=z;d<arguments.length;d+=2)s[arguments[d]]=arguments[d+1];for(var f in s)v(o,f,s[f]),s[f]=void 0}return o},Z=function(e,t,r){$[0]=e,$[1]=t,$[2]=r},G=function(e,t){$.push(e,t)},Q=function(){var e=W.apply(null,$);return $.length=0,e},J=function(e){var t=H();return t},X=function(e,t,r,n){return W.apply(null,arguments),J(e)},K=function(e,t,r,n){return W.apply(null,arguments),q(),J(e)},Y=function(e,t){var r=B(),n=u(r);if(n.text!==e){n.text=e;for(var o=e,i=1;i<arguments.length;i+=1){var a=arguments[i];o=a(o)}r.data=o}return r};e.patch=N,e.patchInner=N,e.patchOuter=A,e.currentElement=U,e.skip=q,e.elementVoid=X,e.elementOpenStart=Z,e.elementOpenEnd=Q,e.elementOpen=W,e.elementClose=J,e.elementPlaceholder=K,e.text=Y,e.attr=G,e.symbols=c,e.attributes=m,e.applyAttr=l,e.applyProp=f,e.notifications=C}),window.customElements||(window.customElements={define:function(e,t){document.registerElement(e,t)}}),function(e){function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return v.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function s(e){var t=new FileReader;return t.readAsArrayBuffer(e),a(t)}function u(e){var t=new FileReader;return t.readAsText(e),a(t)}function c(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(v.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(v.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob?(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=i(this);return e?e:Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}function l(e,t){t=t||{};var r=t.body;if(l.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,r||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function f(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function h(e){var t=new o,r=(e.getAllResponseHeaders()||"").trim().split("\n");return r.forEach(function(e){var r=e.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();t.append(n,o)}),t}function p(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof o?t.headers:new o(t.headers),this.url=t.url||"",this._initBody(e);
}if(!e.fetch){var v={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};o.prototype.append=function(e,n){e=t(e),n=r(n);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(n)},o.prototype["delete"]=function(e){delete this.map[t(e)]},o.prototype.get=function(e){var r=this.map[t(e)];return r?r[0]:null},o.prototype.getAll=function(e){return this.map[t(e)]||[]},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,n){this.map[t(e)]=[r(n)]},o.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){e.call(t,n,r,this)},this)},this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),n(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),n(e)},v.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];l.prototype.clone=function(){return new l(this)},c.call(l.prototype),c.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},p.error=function(){var e=new p(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];p.redirect=function(e,t){if(-1===b.indexOf(t))throw new RangeError("Invalid status code");return new p(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=l,e.Response=p,e.fetch=function(e,t){return new Promise(function(r,n){function o(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var i;i=l.prototype.isPrototypeOf(e)&&!t?e:new l(e,t);var a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:h(a),url:o()},t="response"in a?a.response:a.responseText;r(new p(t,e))},a.onerror=function(){n(new TypeError("Network request failed"))},a.ontimeout=function(){n(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials&&(a.withCredentials=!0),"responseType"in a&&v.blob&&(a.responseType="blob"),i.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),function(e){function t(){function e(e){t=e}if("function"!=typeof Object.observe||"function"!=typeof Array.observe)return!1;var t=[],r={},n=[];return Object.observe(r,e),Array.observe(n,e),r.id=1,r.id=2,delete r.id,n.push(1,2),n.length=0,Object.deliverChangeRecords(e),5!==t.length?!1:"add"!=t[0].type||"update"!=t[1].type||"delete"!=t[2].type||"splice"!=t[3].type||"splice"!=t[4].type?!1:(Object.unobserve(r,e),Array.unobserve(n,e),!0)}function r(){if("undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime)return!1;if("undefined"!=typeof navigator&&navigator.getDeviceStorage)return!1;try{var e=new Function("","return true;");return e()}catch(t){return!1}}function n(e){return+e===e>>>0&&""!==e}function o(e){return+e}function i(e){return e===Object(e)}function a(e,t){return e===t?0!==e||1/e===1/t:q(e)&&q(t)?!0:e!==e&&t!==t}function s(e){if(void 0===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:case 48:return e;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return t>=97&&122>=t||t>=65&&90>=t?"ident":t>=49&&57>=t?"number":"else"}function u(){}function c(e){function t(){if(!(f>=e.length)){var t=e[f+1];return"inSingleQuote"==h&&"'"==t||"inDoubleQuote"==h&&'"'==t?(f++,n=t,p.append(),!0):void 0}}for(var r,n,o,i,a,c,d,l=[],f=-1,h="beforePath",p={push:function(){void 0!==o&&(l.push(o),o=void 0)},append:function(){void 0===o?o=n:o+=n}};h;)if(f++,r=e[f],"\\"!=r||!t(h)){if(i=s(r),d=G[h],a=d[i]||d["else"]||"error","error"==a)return;if(h=a[0],c=p[a[1]]||u,n=void 0===a[2]?r:a[2],c(),"afterPath"===h)return l}}function d(e){return Z.test(e)}function l(e,t){if(t!==Q)throw Error("Use Path.get to retrieve path objects");for(var r=0;r<e.length;r++)this.push(String(e[r]));U&&this.length&&(this.getValueFrom=this.compiledGetValueFromFn())}function f(e){if(e instanceof l)return e;if(null!=e&&0!=e.length||(e=""),"string"!=typeof e){if(n(e.length))return new l(e,Q);e=String(e)}var t=J[e];if(t)return t;var r=c(e);return r?(t=new l(r,Q),J[e]=t,t):X}function h(e){return n(e)?"["+e+"]":'["'+e.replace(/"/g,'\\"')+'"]'}function p(t){for(var r=0;Y>r&&t.check_();)r++;return H&&(e.dirtyCheckCycleCount=r),r>0}function v(e){for(var t in e)return!1;return!0}function m(e){return v(e.added)&&v(e.removed)&&v(e.changed)}function b(e,t){var r,n={},o={},i={};for(r in t){var a=e[r];void 0!==a&&a===t[r]||(r in e?a!==t[r]&&(i[r]=a):o[r]=void 0)}for(r in e)r in t||(n[r]=e[r]);return Array.isArray(e)&&e.length!==t.length&&(i.length=e.length),{added:n,removed:o,changed:i}}function y(){if(!ee.length)return!1;for(var e=0;e<ee.length;e++)ee[e]();return ee.length=0,!0}function _(){function e(e){t&&t.state_===ie&&!n&&t.check_(e)}var t,r,n=!1,o=!0;return{open:function(r){if(t)throw Error("ObservedObject in use");o||Object.deliverChangeRecords(e),t=r,o=!1},observe:function(t,n){r=t,n?Array.observe(r,e):Object.observe(r,e)},deliver:function(t){n=t,Object.deliverChangeRecords(e),n=!1},close:function(){t=void 0,Object.unobserve(r,e),re.push(this)}}}function w(e,t,r){var n=re.pop()||_();return n.open(e),n.observe(t,r),n}function g(){function e(t,i){t&&(t===n&&(o[i]=!0),s.indexOf(t)<0&&(s.push(t),Object.observe(t,r)),e(Object.getPrototypeOf(t),i))}function t(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.object!==n||o[r.name]||"setPrototype"===r.type)return!1}return!0}function r(r){if(!t(r)){var n,o;for(n=0;n<a.length;n++)o=a[n],o.state_==ie&&o.iterateObjects_(e);for(n=0;n<a.length;n++)o=a[n],o.state_==ie&&o.check_()}}var n,o,i=0,a=[],s=[],u={objects:s,get rootObject(){return n},set rootObject(e){n=e,o={}},open:function(t,r){a.push(t),i++,t.iterateObjects_(e)},close:function(e){if(i--,!(i>0)){for(var t=0;t<s.length;t++)Object.unobserve(s[t],r),E.unobservedCount++;a.length=0,s.length=0,n=void 0,o=void 0,ne.push(this),K===this&&(K=null)}}};return u}function O(e,t){return K&&K.rootObject===t||(K=ne.pop()||g(),K.rootObject=t),K.open(e,t),K}function E(){this.state_=oe,this.callback_=void 0,this.target_=void 0,this.directObserver_=void 0,this.value_=void 0,this.id_=ue++}function C(e){E._allObserversCount++,de&&ce.push(e)}function x(e){E._allObserversCount--}function T(e){E.call(this),this.value_=e,this.oldObject_=void 0}function k(e){if(!Array.isArray(e))throw Error("Provided object is not an Array");T.call(this,e)}function j(e,t,r){E.call(this),this.object_=e,this.path_=f(t),this.defaultValue_=r,this.directObserver_=void 0}function D(e){E.call(this),this.reportChangesOnOpen_=e,this.value_=[],this.directObserver_=void 0,this.observed_=[]}function M(e){return e}function N(e,t,r,n){this.callback_=void 0,this.target_=void 0,this.value_=void 0,this.observable_=e,this.getValueFn_=t||M,this.setValueFn_=r||M,this.dontPassThroughSet_=n}function A(e,t,r){for(var n={},o={},i=0;i<t.length;i++){var a=t[i];he[a.type]?(a.name in r||(r[a.name]=a.oldValue),"update"!=a.type&&("add"!=a.type?a.name in n?(delete n[a.name],delete r[a.name]):o[a.name]=!0:a.name in o?delete o[a.name]:n[a.name]=!0)):(console.error("Unknown changeRecord type: "+a.type),console.error(a))}var s;for(s in n)n[s]=e[s];for(s in o)o[s]=void 0;var u={};for(s in r)if(!(s in n||s in o)){var c=e[s];r[s]!==c&&(u[s]=c)}return{added:n,removed:o,changed:u}}function P(e,t,r){return{index:e,removed:t,addedCount:r}}function S(){}function L(e,t,r,n,o,i){return ye.calcSplices(e,t,r,n,o,i)}function I(e,t,r,n){return r>t||e>n?-1:t==r||n==e?0:r>e?n>t?t-r:n-r:t>n?n-e:t-e}function R(e,t,r,n){for(var o=P(t,r,n),i=!1,a=0,s=0;s<e.length;s++){var u=e[s];if(u.index+=a,!i){var c=I(o.index,o.index+o.removed.length,u.index,u.index+u.addedCount);if(c>=0){e.splice(s,1),s--,a-=u.addedCount-u.removed.length,o.addedCount+=u.addedCount-c;var d=o.removed.length+u.removed.length-c;if(o.addedCount||d){if(r=u.removed,o.index<u.index){var l=o.removed.slice(0,u.index-o.index);Array.prototype.push.apply(l,r),r=l}if(o.index+o.removed.length>u.index+u.addedCount){var f=o.removed.slice(u.index+u.addedCount-o.index);Array.prototype.push.apply(r,f)}o.removed=r,u.index<o.index&&(o.index=u.index)}else i=!0}else if(o.index<u.index){i=!0,e.splice(s,0,o),s++;var h=o.addedCount-o.removed.length;u.index+=h,a+=h}}}i||e.push(o)}function F(e,t){for(var r=[],i=0;i<t.length;i++){var a=t[i];switch(a.type){case"splice":R(r,a.index,a.removed.slice(),a.addedCount);break;case"add":case"update":case"delete":if(!n(a.name))continue;var s=o(a.name);if(0>s)continue;R(r,s,[a.oldValue],1);break;default:console.error("Unexpected record type: "+JSON.stringify(a))}}return r}function V(e,t){var r=[];return F(e,t).forEach(function(t){return 1==t.addedCount&&1==t.removed.length?void(t.removed[0]!==e[t.index]&&r.push(t)):void(r=r.concat(L(e,t.index,t.index+t.addedCount,t.removed,0,t.removed.length)))}),r}var H=e.testingExposeCycleCount,B=t(),U=r(),q=e.Number.isNaN||function(t){return"number"==typeof t&&e.isNaN(t)},z="__proto__"in{}?function(e){return e}:function(e){var t=e.__proto__;if(!t)return e;var r=Object.create(t);return Object.getOwnPropertyNames(e).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}),r},$="[$_a-zA-Z]",W="[$_a-zA-Z0-9]",Z=new RegExp("^"+$+"+"+W+"*$"),G={beforePath:{ws:["beforePath"],ident:["inIdent","append"],"[":["beforeElement"],eof:["afterPath"]},inPath:{ws:["inPath"],".":["beforeIdent"],"[":["beforeElement"],eof:["afterPath"]},beforeIdent:{ws:["beforeIdent"],ident:["inIdent","append"]},inIdent:{ident:["inIdent","append"],0:["inIdent","append"],number:["inIdent","append"],ws:["inPath","push"],".":["beforeIdent","push"],"[":["beforeElement","push"],eof:["afterPath","push"]},beforeElement:{ws:["beforeElement"],0:["afterZero","append"],number:["inIndex","append"],"'":["inSingleQuote","append",""],'"':["inDoubleQuote","append",""]},afterZero:{ws:["afterElement","push"],"]":["inPath","push"]},inIndex:{0:["inIndex","append"],number:["inIndex","append"],ws:["afterElement"],"]":["inPath","push"]},inSingleQuote:{"'":["afterElement"],eof:["error"],"else":["inSingleQuote","append"]},inDoubleQuote:{'"':["afterElement"],eof:["error"],"else":["inDoubleQuote","append"]},afterElement:{ws:["afterElement"],"]":["inPath","push"]}},Q={},J={};l.get=f,l.prototype=z({__proto__:[],valid:!0,toString:function(){for(var e="",t=0;t<this.length;t++){var r=this[t];e+=d(r)?t?"."+r:r:h(r)}return e},getValueFrom:function(e,t){for(var r=0;r<this.length;r++){var n=this[r];if(null==e||!(n in e))return t;e=e[n]}return e},iterateObjects:function(e,t){for(var r=0;r<this.length;r++){if(r&&(e=e[this[r-1]]),!i(e))return;t(e,this[r])}},compiledGetValueFromFn:function(){var e="",t="obj";e+="if (obj != null";for(var r,n=0;n<this.length-1;n++)r=this[n],t+=d(r)?"."+r:h(r),e+=" &&\n    "+t+" != null";r=this[n];var o=d(r),i=o?'"'+r.replace(/"/g,'\\"')+'"':r;return e+=" &&\n    "+i+" in "+t+")\n",t+=o?"."+r:h(r),e+="  return "+t+";\nelse\n  return defaultValue;",new Function("obj","defaultValue",e)},setValueFrom:function(e,t){if(!this.length)return!1;for(var r=0;r<this.length-1;r++){if(!i(e))return!1;e=e[this[r]]}return i(e)?(e[this[r]]=t,!0):!1}});var X=new l("",Q);X.valid=!1,X.getValueFrom=X.setValueFrom=function(){};var K,Y=1e3,ee=[],te=B?function(){return function(e){return Promise.resolve().then(e)}}():function(){return function(e){ee.push(e)}}(),re=[],ne=[],oe=0,ie=1,ae=2,se=3,ue=1;E.prototype={open:function(e,t){if(this.state_!=oe)throw Error("Observer has already been opened.");return C(this),this.callback_=e,this.target_=t,this.connect_(),this.state_=ie,this.value_},close:function(){this.state_==ie&&(x(this),this.disconnect_(),this.value_=void 0,this.callback_=void 0,this.target_=void 0,this.state_=ae)},deliver:function(){this.state_==ie&&p(this)},report_:function(e){try{this.callback_.apply(this.target_,e)}catch(t){E._errorThrownDuringCallback=!0,console.error("Exception caught during observer callback: "+(t.stack||t))}},discardChanges:function(){return this.check_(void 0,!0),this.value_}};var ce,de=!B;E._allObserversCount=0,de&&(ce=[]);var le=!1;e.Platform=e.Platform||{},e.Platform.performMicrotaskCheckpoint=function(){if(!le&&de){le=!0;var t,r,n=0;do{n++,r=ce,ce=[],t=!1;for(var o=0;o<r.length;o++){var i=r[o];i.state_==ie&&(i.check_()&&(t=!0),ce.push(i))}y()&&(t=!0)}while(Y>n&&t);H&&(e.dirtyCheckCycleCount=n),le=!1}},de&&(e.Platform.clearObservers=function(){ce=[]}),T.prototype=z({__proto__:E.prototype,arrayObserve:!1,connect_:function(e,t){B?this.directObserver_=w(this,this.value_,this.arrayObserve):this.oldObject_=this.copyObject(this.value_)},copyObject:function(e){var t=Array.isArray(e)?[]:{};for(var r in e)t[r]=e[r];return Array.isArray(e)&&(t.length=e.length),t},check_:function(e,t){var r,n;if(B){if(!e)return!1;n={},r=A(this.value_,e,n)}else n=this.oldObject_,r=b(this.value_,this.oldObject_);return m(r)?!1:(B||(this.oldObject_=this.copyObject(this.value_)),this.report_([r.added||{},r.removed||{},r.changed||{},function(e){return n[e]}]),!0)},disconnect_:function(){B?(this.directObserver_.close(),this.directObserver_=void 0):this.oldObject_=void 0},deliver:function(){this.state_==ie&&(B?this.directObserver_.deliver(!1):p(this))},discardChanges:function(){return this.directObserver_?this.directObserver_.deliver(!0):this.oldObject_=this.copyObject(this.value_),this.value_}}),k.prototype=z({__proto__:T.prototype,arrayObserve:!0,copyObject:function(e){return e.slice()},check_:function(e){var t;if(B){if(!e)return!1;t=V(this.value_,e)}else t=L(this.value_,0,this.value_.length,this.oldObject_,0,this.oldObject_.length);return t&&t.length?(B||(this.oldObject_=this.copyObject(this.value_)),this.report_([t]),!0):!1}}),k.applySplices=function(e,t,r){r.forEach(function(r){for(var n=[r.index,r.removed.length],o=r.index;o<r.index+r.addedCount;)n.push(t[o]),o++;Array.prototype.splice.apply(e,n)})},j.prototype=z({__proto__:E.prototype,get path(){return this.path_},connect_:function(){B&&(this.directObserver_=O(this,this.object_)),this.check_(void 0,!0)},disconnect_:function(){this.value_=void 0,this.directObserver_&&(this.directObserver_.close(this),this.directObserver_=void 0)},iterateObjects_:function(e){this.path_.iterateObjects(this.object_,e)},check_:function(e,t){var r=this.value_;return this.value_=this.path_.getValueFrom(this.object_,this.defaultValue_),t||a(this.value_,r)?!1:(this.report_([this.value_,r,this]),!0)},setValue:function(e){this.path_&&this.path_.setValueFrom(this.object_,e)}});var fe={};D.prototype=z({__proto__:E.prototype,connect_:function(){if(B){for(var e,t=!1,r=0;r<this.observed_.length;r+=2)if(e=this.observed_[r],e!==fe){t=!0;break}t&&(this.directObserver_=O(this,e))}this.check_(void 0,!this.reportChangesOnOpen_)},disconnect_:function(){for(var e=0;e<this.observed_.length;e+=2)this.observed_[e]===fe&&this.observed_[e+1].close();this.observed_.length=0,this.value_.length=0,this.directObserver_&&(this.directObserver_.close(this),this.directObserver_=void 0)},addPath:function(e,t){if(this.state_!=oe&&this.state_!=se)throw Error("Cannot add paths once started.");if(t=f(t),this.observed_.push(e,t),this.reportChangesOnOpen_){var r=this.observed_.length/2-1;this.value_[r]=t.getValueFrom(e)}},addObserver:function(e){if(this.state_!=oe&&this.state_!=se)throw Error("Cannot add observers once started.");if(this.observed_.push(fe,e),this.reportChangesOnOpen_){var t=this.observed_.length/2-1;this.value_[t]=e.open(this.deliver,this)}},startReset:function(){if(this.state_!=ie)throw Error("Can only reset while open");this.state_=se,this.disconnect_()},finishReset:function(){if(this.state_!=se)throw Error("Can only finishReset after startReset");return this.state_=ie,this.connect_(),this.value_},iterateObjects_:function(e){for(var t,r=0;r<this.observed_.length;r+=2)t=this.observed_[r],t!==fe&&this.observed_[r+1].iterateObjects(t,e)},check_:function(e,t){for(var r,n=0;n<this.observed_.length;n+=2){var o,i=this.observed_[n],s=this.observed_[n+1];if(i===fe){var u=s;o=this.state_===oe?u.open(this.deliver,this):u.discardChanges()}else o=s.getValueFrom(i);t?this.value_[n/2]=o:a(o,this.value_[n/2])||(r=r||[],r[n/2]=this.value_[n/2],this.value_[n/2]=o)}return r?(this.report_([this.value_,r,this.observed_]),!0):!1}}),N.prototype={open:function(e,t){return this.callback_=e,this.target_=t,this.value_=this.getValueFn_(this.observable_.open(this.observedCallback_,this)),this.value_},observedCallback_:function(e){if(e=this.getValueFn_(e),!a(e,this.value_)){var t=this.value_;this.value_=e,this.callback_.call(this.target_,this.value_,t)}},discardChanges:function(){return this.value_=this.getValueFn_(this.observable_.discardChanges()),this.value_},deliver:function(){return this.observable_.deliver()},setValue:function(e){return e=this.setValueFn_(e),!this.dontPassThroughSet_&&this.observable_.setValue?this.observable_.setValue(e):void 0},close:function(){this.observable_&&this.observable_.close(),this.callback_=void 0,this.target_=void 0,this.observable_=void 0,this.value_=void 0,this.getValueFn_=void 0,this.setValueFn_=void 0}};var he={add:!0,update:!0,"delete":!0},pe=0,ve=1,me=2,be=3;S.prototype={calcEditDistances:function(e,t,r,n,o,i){var a,s,u=i-o+1,c=r-t+1,d=new Array(u);for(a=0;u>a;a++)d[a]=new Array(c),d[a][0]=a;for(s=0;c>s;s++)d[0][s]=s;for(a=1;u>a;a++)for(s=1;c>s;s++)if(this.equals(e[t+s-1],n[o+a-1]))d[a][s]=d[a-1][s-1];else{var l=d[a-1][s]+1,f=d[a][s-1]+1;d[a][s]=f>l?l:f}return d},spliceOperationsFromEditDistances:function(e){for(var t=e.length-1,r=e[0].length-1,n=e[t][r],o=[];t>0||r>0;)if(0!=t)if(0!=r){var i,a=e[t-1][r-1],s=e[t-1][r],u=e[t][r-1];i=u>s?a>s?s:a:a>u?u:a,i==a?(a==n?o.push(pe):(o.push(ve),n=a),t--,r--):i==s?(o.push(be),t--,n=s):(o.push(me),r--,n=u)}else o.push(be),t--;else o.push(me),r--;return o.reverse(),o},calcSplices:function(e,t,r,n,o,i){var a=0,s=0,u=Math.min(r-t,i-o);if(0==t&&0==o&&(a=this.sharedPrefix(e,n,u)),r==e.length&&i==n.length&&(s=this.sharedSuffix(e,n,u-a)),t+=a,o+=a,r-=s,i-=s,r-t==0&&i-o==0)return[];var c;if(t==r){for(c=P(t,[],0);i>o;)c.removed.push(n[o++]);return[c]}if(o==i)return[P(t,[],r-t)];for(var d=this.spliceOperationsFromEditDistances(this.calcEditDistances(e,t,r,n,o,i)),l=[],f=t,h=o,p=0;p<d.length;p++)switch(d[p]){case pe:c&&(l.push(c),c=void 0),f++,h++;break;case ve:c||(c=P(f,[],0)),c.addedCount++,f++,c.removed.push(n[h]),h++;break;case me:c||(c=P(f,[],0)),c.addedCount++,f++;break;case be:c||(c=P(f,[],0)),c.removed.push(n[h]),h++}return c&&l.push(c),l},sharedPrefix:function(e,t,r){for(var n=0;r>n;n++)if(!this.equals(e[n],t[n]))return n;return r},sharedSuffix:function(e,t,r){for(var n=e.length,o=t.length,i=0;r>i&&this.equals(e[--n],t[--o]);)i++;return i},calculateSplices:function(e,t){return this.calcSplices(e,0,e.length,t,0,t.length)},equals:function(e,t){return e===t}};var ye=new S,_e=e;"undefined"==typeof exports||exports.nodeType||("undefined"!=typeof module&&module.exports&&(exports=module.exports),_e=exports),_e.Observer=E,_e.Observer.runEOM_=te,_e.Observer.observerSentinel_=fe,_e.Observer.hasObjectObserve=B,_e.ArrayObserver=k,_e.ArrayObserver.calculateSplices=function(e,t){return ye.calculateSplices(e,t)},_e.ArraySplice=S,_e.ObjectObserver=T,_e.PathObserver=j,_e.CompoundObserver=D,_e.Path=l,_e.ObserverTransform=N}("undefined"!=typeof global&&global&&"undefined"!=typeof module&&module?global:this||window);