(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.sj=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):factory(global.IncrementalDOM={})})(this,function(exports){"use strict";var hasOwnProperty=Object.prototype.hasOwnProperty;var create=Object.create;var has=function(map,property){return hasOwnProperty.call(map,property)};var createMap=function(){return create(null)};function NodeData(nodeName,key){this.attrs=createMap();this.attrsArr=[];this.newAttrs=createMap();this.key=key;this.keyMap=null;this.keyMapValid=true;this.nodeName=nodeName;this.text=null}var initData=function(node,nodeName,key){var data=new NodeData(nodeName,key);node["__incrementalDOMData"]=data;return data};var getData=function(node){var data=node["__incrementalDOMData"];if(!data){var nodeName=node.nodeName.toLowerCase();var key=null;if(node instanceof Element){key=node.getAttribute("key")}data=initData(node,nodeName,key)}return data};var symbols={"default":"__default",placeholder:"__placeholder"};var getNamespace=function(name){if(name.lastIndexOf("xml:",0)===0){return"http://www.w3.org/XML/1998/namespace"}if(name.lastIndexOf("xlink:",0)===0){return"http://www.w3.org/1999/xlink"}};var applyAttr=function(el,name,value){if(value==null){el.removeAttribute(name)}else{var attrNS=getNamespace(name);if(attrNS){el.setAttributeNS(attrNS,name,value)}else{el.setAttribute(name,value)}}};var applyProp=function(el,name,value){el[name]=value};var applyStyle=function(el,name,style){if(typeof style==="string"){el.style.cssText=style}else{el.style.cssText="";var elStyle=el.style;var obj=style;for(var prop in obj){if(has(obj,prop)){elStyle[prop]=obj[prop]}}}};var applyAttributeTyped=function(el,name,value){var type=typeof value;if(type==="object"||type==="function"){applyProp(el,name,value)}else{applyAttr(el,name,value)}};var updateAttribute=function(el,name,value){var data=getData(el);var attrs=data.attrs;if(attrs[name]===value){return}var mutator=attributes[name]||attributes[symbols.default];mutator(el,name,value);attrs[name]=value};var attributes=createMap();attributes[symbols.default]=applyAttributeTyped;attributes[symbols.placeholder]=function(){};attributes["style"]=applyStyle;var getNamespaceForTag=function(tag,parent){if(tag==="svg"){return"http://www.w3.org/2000/svg"}if(getData(parent).nodeName==="foreignObject"){return null}return parent.namespaceURI};var createElement=function(doc,parent,tag,key,statics){var namespace=getNamespaceForTag(tag,parent);var el=undefined;if(namespace){el=doc.createElementNS(namespace,tag)}else{el=doc.createElement(tag)}initData(el,tag,key);if(statics){for(var i=0;i<statics.length;i+=2){updateAttribute(el,statics[i],statics[i+1])}}return el};var createText=function(doc){var node=doc.createTextNode("");initData(node,"#text",null);return node};var createKeyMap=function(el){var map=createMap();var child=el.firstElementChild;while(child){var key=getData(child).key;if(key){map[key]=child}child=child.nextElementSibling}return map};var getKeyMap=function(el){var data=getData(el);if(!data.keyMap){data.keyMap=createKeyMap(el)}return data.keyMap};var getChild=function(parent,key){return key?getKeyMap(parent)[key]:null};var registerChild=function(parent,key,child){getKeyMap(parent)[key]=child};var notifications={nodesCreated:null,nodesDeleted:null};function Context(){this.created=notifications.nodesCreated&&[];this.deleted=notifications.nodesDeleted&&[]}Context.prototype.markCreated=function(node){if(this.created){this.created.push(node)}};Context.prototype.markDeleted=function(node){if(this.deleted){this.deleted.push(node)}};Context.prototype.notifyChanges=function(){if(this.created&&this.created.length>0){notifications.nodesCreated(this.created)}if(this.deleted&&this.deleted.length>0){notifications.nodesDeleted(this.deleted)}};var assertKeyedTagMatches=function(nodeName,tag,key){if(nodeName!==tag){throw new Error('Was expecting node with key "'+key+'" to be a '+tag+", not a "+nodeName+".")}};var context=null;var currentNode=null;var currentParent=null;var root=null;var doc=null;var patchFactory=function(run){var f=function(node,fn,data){var prevContext=context;var prevRoot=root;var prevDoc=doc;var prevCurrentNode=currentNode;var prevCurrentParent=currentParent;var previousInAttributes=false;var previousInSkip=false;context=new Context;root=node;doc=node.ownerDocument;currentParent=node.parentNode;if("production"!=="production"){}run(node,fn,data);if("production"!=="production"){}context.notifyChanges();context=prevContext;root=prevRoot;doc=prevDoc;currentNode=prevCurrentNode;currentParent=prevCurrentParent};return f};var patchInner=patchFactory(function(node,fn,data){currentNode=node;enterNode();fn(data);exitNode();if("production"!=="production"){}});var patchOuter=patchFactory(function(node,fn,data){currentNode={nextSibling:node};fn(data);if("production"!=="production"){}});var matches=function(nodeName,key){var data=getData(currentNode);return nodeName===data.nodeName&&key==data.key};var alignWithDOM=function(nodeName,key,statics){if(currentNode&&matches(nodeName,key)){return}var node=undefined;if(key){node=getChild(currentParent,key);if(node&&"production"!=="production"){assertKeyedTagMatches(getData(node).nodeName,nodeName,key)}}if(!node){if(nodeName==="#text"){node=createText(doc)}else{node=createElement(doc,currentParent,nodeName,key,statics)}if(key){registerChild(currentParent,key,node)}context.markCreated(node)}if(currentNode&&getData(currentNode).key){currentParent.replaceChild(node,currentNode);getData(currentParent).keyMapValid=false}else{currentParent.insertBefore(node,currentNode)}currentNode=node};var clearUnvisitedDOM=function(){var node=currentParent;var data=getData(node);var keyMap=data.keyMap;var keyMapValid=data.keyMapValid;var child=node.lastChild;var key=undefined;if(child===currentNode&&keyMapValid){return}if(data.attrs[symbols.placeholder]&&node!==root){if("production"!=="production"){}return}while(child!==currentNode){node.removeChild(child);context.markDeleted(child);key=getData(child).key;if(key){delete keyMap[key]}child=node.lastChild}if(!keyMapValid){for(key in keyMap){child=keyMap[key];if(child.parentNode!==node){context.markDeleted(child);delete keyMap[key]}}data.keyMapValid=true}};var enterNode=function(){currentParent=currentNode;currentNode=null};var nextNode=function(){if(currentNode){currentNode=currentNode.nextSibling}else{currentNode=currentParent.firstChild}};var exitNode=function(){clearUnvisitedDOM();currentNode=currentParent;currentParent=currentParent.parentNode};var coreElementOpen=function(tag,key,statics){nextNode();alignWithDOM(tag,key,statics);enterNode();return currentParent};var coreElementClose=function(){if("production"!=="production"){}exitNode();return currentNode};var coreText=function(){nextNode();alignWithDOM("#text",null,null);return currentNode};var currentElement=function(){if("production"!=="production"){}return currentParent};var skip=function(){if("production"!=="production"){}currentNode=currentParent.lastChild};var ATTRIBUTES_OFFSET=3;var argsBuilder=[];var elementOpen=function(tag,key,statics,const_args){if("production"!=="production"){}var node=coreElementOpen(tag,key,statics);var data=getData(node);var attrsArr=data.attrsArr;var newAttrs=data.newAttrs;var attrsChanged=false;var i=ATTRIBUTES_OFFSET;var j=0;for(;i<arguments.length;i+=1,j+=1){if(attrsArr[j]!==arguments[i]){attrsChanged=true;break}}for(;i<arguments.length;i+=1,j+=1){attrsArr[j]=arguments[i]}if(j<attrsArr.length){attrsChanged=true;attrsArr.length=j}if(attrsChanged){for(i=ATTRIBUTES_OFFSET;i<arguments.length;i+=2){newAttrs[arguments[i]]=arguments[i+1]}for(var _attr in newAttrs){updateAttribute(node,_attr,newAttrs[_attr]);newAttrs[_attr]=undefined}}return node};var elementOpenStart=function(tag,key,statics){if("production"!=="production"){}argsBuilder[0]=tag;argsBuilder[1]=key;argsBuilder[2]=statics};var attr=function(name,value){if("production"!=="production"){}argsBuilder.push(name,value)};var elementOpenEnd=function(){if("production"!=="production"){}var node=elementOpen.apply(null,argsBuilder);argsBuilder.length=0;return node};var elementClose=function(tag){if("production"!=="production"){}var node=coreElementClose();if("production"!=="production"){}return node};var elementVoid=function(tag,key,statics,const_args){elementOpen.apply(null,arguments);return elementClose(tag)};var elementPlaceholder=function(tag,key,statics,const_args){if("production"!=="production"){}elementOpen.apply(null,arguments);skip();return elementClose(tag)};var text=function(value,const_args){if("production"!=="production"){}var node=coreText();var data=getData(node);if(data.text!==value){data.text=value;var formatted=value;for(var i=1;i<arguments.length;i+=1){var fn=arguments[i];formatted=fn(formatted)}node.data=formatted}return node};exports.patch=patchInner;exports.patchInner=patchInner;exports.patchOuter=patchOuter;exports.currentElement=currentElement;exports.skip=skip;exports.elementVoid=elementVoid;exports.elementOpenStart=elementOpenStart;exports.elementOpenEnd=elementOpenEnd;exports.elementOpen=elementOpen;exports.elementClose=elementClose;exports.elementPlaceholder=elementPlaceholder;exports.text=text;exports.attr=attr;exports.symbols=symbols;exports.attributes=attributes;exports.applyAttr=applyAttr;exports.applyProp=applyProp;exports.notifications=notifications})},{}],2:[function(require,module,exports){"use strict";var hasOwnProperty=Object.prototype.hasOwnProperty;var propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(val===null||val===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(val)}function shouldUseNative(){try{if(!Object.assign){return false}var test1=new String("abc");test1[5]="de";if(Object.getOwnPropertyNames(test1)[0]==="5"){return false}var test2={};for(var i=0;i<10;i++){test2["_"+String.fromCharCode(i)]=i}var order2=Object.getOwnPropertyNames(test2).map(function(n){return test2[n]});if(order2.join("")!=="0123456789"){return false}var test3={};"abcdefghijklmnopqrst".split("").forEach(function(letter){test3[letter]=letter});if(Object.keys(Object.assign({},test3)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(e){return false}}module.exports=shouldUseNative()?Object.assign:function(target,source){var from;var to=toObject(target);var symbols;for(var s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from){if(hasOwnProperty.call(from,key)){to[key]=from[key]}}if(Object.getOwnPropertySymbols){symbols=Object.getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++){if(propIsEnumerable.call(from,symbols[i])){to[symbols[i]]=from[symbols[i]]}}}}return to}},{}],3:[function(require,module,exports){if(typeof WeakMap==="undefined"){(function(){var defineProperty=Object.defineProperty;var counter=Date.now()%1e9;var WeakMap=function(){this.name="__st"+(Math.random()*1e9>>>0)+(counter++ +"__")};WeakMap.prototype={set:function(key,value){var entry=key[this.name];if(entry&&entry[0]===key)entry[1]=value;else defineProperty(key,this.name,{value:[key,value],writable:true});return this},get:function(key){var entry;return(entry=key[this.name])&&entry[0]===key?entry[1]:undefined},"delete":function(key){var entry=key[this.name];if(!entry||entry[0]!==key)return false;entry[0]=entry[1]=undefined;return true},has:function(key){var entry=key[this.name];if(!entry)return false;return entry[0]===key}};window.WeakMap=WeakMap})()}(function(global){if(global.JsMutationObserver){return}var registrationsTable=new WeakMap;var setImmediate;if(/Trident|Edge/.test(navigator.userAgent)){setImmediate=setTimeout}else if(window.setImmediate){setImmediate=window.setImmediate}else{var setImmediateQueue=[];var sentinel=String(Math.random());window.addEventListener("message",function(e){if(e.data===sentinel){var queue=setImmediateQueue;setImmediateQueue=[];queue.forEach(function(func){func()})}});setImmediate=function(func){setImmediateQueue.push(func);window.postMessage(sentinel,"*")}}var isScheduled=false;var scheduledObservers=[];function scheduleCallback(observer){scheduledObservers.push(observer);if(!isScheduled){isScheduled=true;setImmediate(dispatchCallbacks)}}function wrapIfNeeded(node){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(node)||node}function dispatchCallbacks(){isScheduled=false;var observers=scheduledObservers;scheduledObservers=[];observers.sort(function(o1,o2){return o1.uid_-o2.uid_});var anyNonEmpty=false;observers.forEach(function(observer){var queue=observer.takeRecords();removeTransientObserversFor(observer);if(queue.length){observer.callback_(queue,observer);anyNonEmpty=true}});if(anyNonEmpty)dispatchCallbacks()}function removeTransientObserversFor(observer){observer.nodes_.forEach(function(node){var registrations=registrationsTable.get(node);if(!registrations)return;registrations.forEach(function(registration){if(registration.observer===observer)registration.removeTransientObservers()})})}function forEachAncestorAndObserverEnqueueRecord(target,callback){for(var node=target;node;node=node.parentNode){var registrations=registrationsTable.get(node);if(registrations){for(var j=0;j<registrations.length;j++){var registration=registrations[j];var options=registration.options;if(node!==target&&!options.subtree)continue;var record=callback(options);if(record)registration.enqueue(record)}}}}var uidCounter=0;function JsMutationObserver(callback){this.callback_=callback;this.nodes_=[];this.records_=[];this.uid_=++uidCounter}JsMutationObserver.prototype={observe:function(target,options){target=wrapIfNeeded(target);if(!options.childList&&!options.attributes&&!options.characterData||options.attributeOldValue&&!options.attributes||options.attributeFilter&&options.attributeFilter.length&&!options.attributes||options.characterDataOldValue&&!options.characterData){throw new SyntaxError}var registrations=registrationsTable.get(target);if(!registrations)registrationsTable.set(target,registrations=[]);var registration;for(var i=0;i<registrations.length;i++){if(registrations[i].observer===this){registration=registrations[i];registration.removeListeners();registration.options=options;break}}if(!registration){registration=new Registration(this,target,options);registrations.push(registration);this.nodes_.push(target)}registration.addListeners()},disconnect:function(){this.nodes_.forEach(function(node){var registrations=registrationsTable.get(node);for(var i=0;i<registrations.length;i++){var registration=registrations[i];if(registration.observer===this){registration.removeListeners();registrations.splice(i,1);break}}},this);this.records_=[]},takeRecords:function(){var copyOfRecords=this.records_;this.records_=[];return copyOfRecords}};function MutationRecord(type,target){this.type=type;this.target=target;this.addedNodes=[];this.removedNodes=[];this.previousSibling=null;this.nextSibling=null;this.attributeName=null;this.attributeNamespace=null;this.oldValue=null}function copyMutationRecord(original){var record=new MutationRecord(original.type,original.target);record.addedNodes=original.addedNodes.slice();record.removedNodes=original.removedNodes.slice();record.previousSibling=original.previousSibling;record.nextSibling=original.nextSibling;record.attributeName=original.attributeName;record.attributeNamespace=original.attributeNamespace;record.oldValue=original.oldValue;return record}var currentRecord,recordWithOldValue;function getRecord(type,target){return currentRecord=new MutationRecord(type,target)}function getRecordWithOldValue(oldValue){if(recordWithOldValue)return recordWithOldValue;recordWithOldValue=copyMutationRecord(currentRecord);recordWithOldValue.oldValue=oldValue;return recordWithOldValue}function clearRecords(){currentRecord=recordWithOldValue=undefined}function recordRepresentsCurrentMutation(record){return record===recordWithOldValue||record===currentRecord}function selectRecord(lastRecord,newRecord){if(lastRecord===newRecord)return lastRecord;if(recordWithOldValue&&recordRepresentsCurrentMutation(lastRecord))return recordWithOldValue;return null}function Registration(observer,target,options){this.observer=observer;this.target=target;this.options=options;this.transientObservedNodes=[]}Registration.prototype={enqueue:function(record){var records=this.observer.records_;var length=records.length;if(records.length>0){var lastRecord=records[length-1];var recordToReplaceLast=selectRecord(lastRecord,record);if(recordToReplaceLast){records[length-1]=recordToReplaceLast;return}}else{scheduleCallback(this.observer)}records[length]=record},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(node){var options=this.options;if(options.attributes)node.addEventListener("DOMAttrModified",this,true);if(options.characterData)node.addEventListener("DOMCharacterDataModified",this,true);if(options.childList)node.addEventListener("DOMNodeInserted",this,true);if(options.childList||options.subtree)node.addEventListener("DOMNodeRemoved",this,true)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(node){var options=this.options;if(options.attributes)node.removeEventListener("DOMAttrModified",this,true);if(options.characterData)node.removeEventListener("DOMCharacterDataModified",this,true);if(options.childList)node.removeEventListener("DOMNodeInserted",this,true);if(options.childList||options.subtree)node.removeEventListener("DOMNodeRemoved",this,true)},addTransientObserver:function(node){if(node===this.target)return;this.addListeners_(node);this.transientObservedNodes.push(node);var registrations=registrationsTable.get(node);if(!registrations)registrationsTable.set(node,registrations=[]);registrations.push(this)},removeTransientObservers:function(){var transientObservedNodes=this.transientObservedNodes;this.transientObservedNodes=[];transientObservedNodes.forEach(function(node){this.removeListeners_(node);var registrations=registrationsTable.get(node);for(var i=0;i<registrations.length;i++){if(registrations[i]===this){registrations.splice(i,1);break}}},this)},handleEvent:function(e){e.stopImmediatePropagation();switch(e.type){case"DOMAttrModified":var name=e.attrName;var namespace=e.relatedNode.namespaceURI;var target=e.target;var record=new getRecord("attributes",target);record.attributeName=name;record.attributeNamespace=namespace;var oldValue=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;forEachAncestorAndObserverEnqueueRecord(target,function(options){if(!options.attributes)return;if(options.attributeFilter&&options.attributeFilter.length&&options.attributeFilter.indexOf(name)===-1&&options.attributeFilter.indexOf(namespace)===-1){return}if(options.attributeOldValue)return getRecordWithOldValue(oldValue);return record});break;case"DOMCharacterDataModified":var target=e.target;var record=getRecord("characterData",target);var oldValue=e.prevValue;forEachAncestorAndObserverEnqueueRecord(target,function(options){if(!options.characterData)return;if(options.characterDataOldValue)return getRecordWithOldValue(oldValue);return record});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var changedNode=e.target;var addedNodes,removedNodes;if(e.type==="DOMNodeInserted"){addedNodes=[changedNode];removedNodes=[]}else{addedNodes=[];removedNodes=[changedNode]}var previousSibling=changedNode.previousSibling;var nextSibling=changedNode.nextSibling;var record=getRecord("childList",e.target.parentNode);record.addedNodes=addedNodes;record.removedNodes=removedNodes;record.previousSibling=previousSibling;record.nextSibling=nextSibling;forEachAncestorAndObserverEnqueueRecord(e.relatedNode,function(options){if(!options.childList)return;return record})}clearRecords()}};global.JsMutationObserver=JsMutationObserver;if(!global.MutationObserver){global.MutationObserver=JsMutationObserver;JsMutationObserver._isPolyfilled=true}})(self);(function(scope){"use strict";if(!window.performance){var start=Date.now();window.performance={now:function(){return Date.now()-start}}}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(){var nativeRaf=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return nativeRaf?function(callback){return nativeRaf(function(){callback(performance.now())})}:function(callback){return window.setTimeout(callback,1e3/60)}}()}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(){return window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(id){clearTimeout(id)}}()}var workingDefaultPrevented=function(){var e=document.createEvent("Event");e.initEvent("foo",true,true);e.preventDefault();return e.defaultPrevented}();if(!workingDefaultPrevented){var origPreventDefault=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){if(!this.cancelable){return}origPreventDefault.call(this);Object.defineProperty(this,"defaultPrevented",{get:function(){return true},configurable:true})}}var isIE=/Trident/.test(navigator.userAgent);if(!window.CustomEvent||isIE&&typeof window.CustomEvent!=="function"){window.CustomEvent=function(inType,params){params=params||{};var e=document.createEvent("CustomEvent");e.initCustomEvent(inType,Boolean(params.bubbles),Boolean(params.cancelable),params.detail);return e};window.CustomEvent.prototype=window.Event.prototype}if(!window.Event||isIE&&typeof window.Event!=="function"){var origEvent=window.Event;window.Event=function(inType,params){params=params||{};var e=document.createEvent("Event");e.initEvent(inType,Boolean(params.bubbles),Boolean(params.cancelable));return e};window.Event.prototype=origEvent.prototype}})(window.WebComponents);window.CustomElements=window.CustomElements||{flags:{}};(function(scope){var flags=scope.flags;var modules=[];var addModule=function(module){modules.push(module)};var initializeModules=function(){modules.forEach(function(module){module(scope)})};scope.addModule=addModule;scope.initializeModules=initializeModules;scope.hasNative=Boolean(document.registerElement);scope.isIE=/Trident/.test(navigator.userAgent);scope.useNative=!flags.register&&scope.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)})(window.CustomElements);window.CustomElements.addModule(function(scope){var IMPORT_LINK_TYPE=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";function forSubtree(node,cb){findAllElements(node,function(e){if(cb(e)){return true}forRoots(e,cb)});forRoots(node,cb)}function findAllElements(node,find,data){var e=node.firstElementChild;if(!e){e=node.firstChild;while(e&&e.nodeType!==Node.ELEMENT_NODE){e=e.nextSibling}}while(e){if(find(e,data)!==true){findAllElements(e,find,data)}e=e.nextElementSibling}return null}function forRoots(node,cb){var root=node.shadowRoot;while(root){forSubtree(root,cb);root=root.olderShadowRoot}}function forDocumentTree(doc,cb){_forDocumentTree(doc,cb,[])}function _forDocumentTree(doc,cb,processingDocuments){doc=window.wrap(doc);if(processingDocuments.indexOf(doc)>=0){return}processingDocuments.push(doc);var imports=doc.querySelectorAll("link[rel="+IMPORT_LINK_TYPE+"]");for(var i=0,l=imports.length,n;i<l&&(n=imports[i]);i++){if(n.import){_forDocumentTree(n.import,cb,processingDocuments)}}cb(doc)}scope.forDocumentTree=forDocumentTree;scope.forSubtree=forSubtree});window.CustomElements.addModule(function(scope){var flags=scope.flags;var forSubtree=scope.forSubtree;var forDocumentTree=scope.forDocumentTree;function addedNode(node,isAttached){return added(node,isAttached)||addedSubtree(node,isAttached)}function added(node,isAttached){if(scope.upgrade(node,isAttached)){return true}if(isAttached){attached(node)}}function addedSubtree(node,isAttached){forSubtree(node,function(e){if(added(e,isAttached)){return true}})}var hasThrottledAttached=window.MutationObserver._isPolyfilled&&flags["throttle-attached"];scope.hasPolyfillMutations=hasThrottledAttached;scope.hasThrottledAttached=hasThrottledAttached;var isPendingMutations=false;var pendingMutations=[];function deferMutation(fn){pendingMutations.push(fn);if(!isPendingMutations){isPendingMutations=true;setTimeout(takeMutations)}}function takeMutations(){isPendingMutations=false;var $p=pendingMutations;for(var i=0,l=$p.length,p;i<l&&(p=$p[i]);i++){p()}pendingMutations=[]}function attached(element){if(hasThrottledAttached){deferMutation(function(){_attached(element)})}else{_attached(element)}}function _attached(element){if(element.__upgraded__&&!element.__attached){element.__attached=true;if(element.attachedCallback){element.attachedCallback()}}}function detachedNode(node){detached(node);forSubtree(node,function(e){detached(e)})}function detached(element){if(hasThrottledAttached){deferMutation(function(){_detached(element)})}else{_detached(element)}}function _detached(element){if(element.__upgraded__&&element.__attached){element.__attached=false;if(element.detachedCallback){element.detachedCallback()}}}function inDocument(element){var p=element;var doc=window.wrap(document);while(p){if(p==doc){return true}p=p.parentNode||p.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&p.host}}function watchShadow(node){if(node.shadowRoot&&!node.shadowRoot.__watched){flags.dom&&console.log("watching shadow-root for: ",node.localName);var root=node.shadowRoot;while(root){observe(root);root=root.olderShadowRoot}}}function handler(root,mutations){if(flags.dom){var mx=mutations[0];if(mx&&mx.type==="childList"&&mx.addedNodes){if(mx.addedNodes){var d=mx.addedNodes[0];while(d&&d!==document&&!d.host){d=d.parentNode}var u=d&&(d.URL||d._URL||d.host&&d.host.localName)||"";u=u.split("/?").shift().split("/").pop()}}console.group("mutations (%d) [%s]",mutations.length,u||"")}var isAttached=inDocument(root);mutations.forEach(function(mx){if(mx.type==="childList"){forEach(mx.addedNodes,function(n){if(!n.localName){return}addedNode(n,isAttached)});forEach(mx.removedNodes,function(n){if(!n.localName){return}detachedNode(n)})}});flags.dom&&console.groupEnd()}function takeRecords(node){node=window.wrap(node);if(!node){node=window.wrap(document)}while(node.parentNode){node=node.parentNode}var observer=node.__observer;if(observer){handler(node,observer.takeRecords());takeMutations()}}var forEach=Array.prototype.forEach.call.bind(Array.prototype.forEach);function observe(inRoot){if(inRoot.__observer){return}var observer=new MutationObserver(handler.bind(this,inRoot));observer.observe(inRoot,{childList:true,subtree:true});inRoot.__observer=observer}function upgradeDocument(doc){doc=window.wrap(doc);flags.dom&&console.group("upgradeDocument: ",doc.baseURI.split("/").pop());var isMainDocument=doc===window.wrap(document);addedNode(doc,isMainDocument);observe(doc);flags.dom&&console.groupEnd()}function upgradeDocumentTree(doc){forDocumentTree(doc,upgradeDocument)}var originalCreateShadowRoot=Element.prototype.createShadowRoot;if(originalCreateShadowRoot){Element.prototype.createShadowRoot=function(){var root=originalCreateShadowRoot.call(this);window.CustomElements.watchShadow(this);return root}}scope.watchShadow=watchShadow;scope.upgradeDocumentTree=upgradeDocumentTree;scope.upgradeDocument=upgradeDocument;scope.upgradeSubtree=addedSubtree;scope.upgradeAll=addedNode;scope.attached=attached;scope.takeRecords=takeRecords});window.CustomElements.addModule(function(scope){var flags=scope.flags;function upgrade(node,isAttached){if(node.localName==="template"){if(window.HTMLTemplateElement&&HTMLTemplateElement.decorate){HTMLTemplateElement.decorate(node)}}if(!node.__upgraded__&&node.nodeType===Node.ELEMENT_NODE){var is=node.getAttribute("is");var definition=scope.getRegisteredDefinition(node.localName)||scope.getRegisteredDefinition(is);if(definition){if(is&&definition.tag==node.localName||!is&&!definition.extends){return upgradeWithDefinition(node,definition,isAttached)}}}}function upgradeWithDefinition(element,definition,isAttached){flags.upgrade&&console.group("upgrade:",element.localName);if(definition.is){element.setAttribute("is",definition.is)}implementPrototype(element,definition);element.__upgraded__=true;created(element);if(isAttached){scope.attached(element)}scope.upgradeSubtree(element,isAttached);flags.upgrade&&console.groupEnd();return element}function implementPrototype(element,definition){if(Object.__proto__){element.__proto__=definition.prototype}else{customMixin(element,definition.prototype,definition.native);element.__proto__=definition.prototype}}function customMixin(inTarget,inSrc,inNative){var used={};var p=inSrc;while(p!==inNative&&p!==HTMLElement.prototype){var keys=Object.getOwnPropertyNames(p);for(var i=0,k;k=keys[i];i++){if(!used[k]){Object.defineProperty(inTarget,k,Object.getOwnPropertyDescriptor(p,k));used[k]=1}}p=Object.getPrototypeOf(p)}}function created(element){if(element.createdCallback){element.createdCallback()}}scope.upgrade=upgrade;scope.upgradeWithDefinition=upgradeWithDefinition;scope.implementPrototype=implementPrototype});window.CustomElements.addModule(function(scope){var isIE=scope.isIE;var upgradeDocumentTree=scope.upgradeDocumentTree;var upgradeAll=scope.upgradeAll;var upgradeWithDefinition=scope.upgradeWithDefinition;var implementPrototype=scope.implementPrototype;var useNative=scope.useNative;function register(name,options){var definition=options||{};if(!name){throw new Error("document.registerElement: first argument `name` must not be empty")}if(name.indexOf("-")<0){throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(name)+"'.")}if(isReservedTag(name)){throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(name)+"'. The type name is invalid.")}if(getRegisteredDefinition(name)){throw new Error("DuplicateDefinitionError: a type with name '"+String(name)+"' is already registered")}if(!definition.prototype){definition.prototype=Object.create(HTMLElement.prototype)}definition.__name=name.toLowerCase();if(definition.extends){definition.extends=definition.extends.toLowerCase()}definition.lifecycle=definition.lifecycle||{};definition.ancestry=ancestry(definition.extends);resolveTagName(definition);resolvePrototypeChain(definition);overrideAttributeApi(definition.prototype);registerDefinition(definition.__name,definition);definition.ctor=generateConstructor(definition);definition.ctor.prototype=definition.prototype;definition.prototype.constructor=definition.ctor;if(scope.ready){upgradeDocumentTree(document)}return definition.ctor}function overrideAttributeApi(prototype){if(prototype.setAttribute._polyfilled){return}var setAttribute=prototype.setAttribute;prototype.setAttribute=function(name,value){changeAttribute.call(this,name,value,setAttribute)};var removeAttribute=prototype.removeAttribute;prototype.removeAttribute=function(name){changeAttribute.call(this,name,null,removeAttribute)};prototype.setAttribute._polyfilled=true}function changeAttribute(name,value,operation){name=name.toLowerCase();var oldValue=this.getAttribute(name);operation.apply(this,arguments);var newValue=this.getAttribute(name);if(this.attributeChangedCallback&&newValue!==oldValue){this.attributeChangedCallback(name,oldValue,newValue);
}}function isReservedTag(name){for(var i=0;i<reservedTagList.length;i++){if(name===reservedTagList[i]){return true}}}var reservedTagList=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function ancestry(extnds){var extendee=getRegisteredDefinition(extnds);if(extendee){return ancestry(extendee.extends).concat([extendee])}return[]}function resolveTagName(definition){var baseTag=definition.extends;for(var i=0,a;a=definition.ancestry[i];i++){baseTag=a.is&&a.tag}definition.tag=baseTag||definition.__name;if(baseTag){definition.is=definition.__name}}function resolvePrototypeChain(definition){if(!Object.__proto__){var nativePrototype=HTMLElement.prototype;if(definition.is){var inst=document.createElement(definition.tag);nativePrototype=Object.getPrototypeOf(inst)}var proto=definition.prototype,ancestor;var foundPrototype=false;while(proto){if(proto==nativePrototype){foundPrototype=true}ancestor=Object.getPrototypeOf(proto);if(ancestor){proto.__proto__=ancestor}proto=ancestor}if(!foundPrototype){console.warn(definition.tag+" prototype not found in prototype chain for "+definition.is)}definition.native=nativePrototype}}function instantiate(definition){return upgradeWithDefinition(domCreateElement(definition.tag),definition)}var registry={};function getRegisteredDefinition(name){if(name){return registry[name.toLowerCase()]}}function registerDefinition(name,definition){registry[name]=definition}function generateConstructor(definition){return function(){return instantiate(definition)}}var HTML_NAMESPACE="http://www.w3.org/1999/xhtml";function createElementNS(namespace,tag,typeExtension){if(namespace===HTML_NAMESPACE){return createElement(tag,typeExtension)}else{return domCreateElementNS(namespace,tag)}}function createElement(tag,typeExtension){if(tag){tag=tag.toLowerCase()}if(typeExtension){typeExtension=typeExtension.toLowerCase()}var definition=getRegisteredDefinition(typeExtension||tag);if(definition){if(tag==definition.tag&&typeExtension==definition.is){return new definition.ctor}if(!typeExtension&&!definition.is){return new definition.ctor}}var element;if(typeExtension){element=createElement(tag);element.setAttribute("is",typeExtension);return element}element=domCreateElement(tag);if(tag.indexOf("-")>=0){implementPrototype(element,HTMLElement)}return element}var domCreateElement=document.createElement.bind(document);var domCreateElementNS=document.createElementNS.bind(document);var isInstance;if(!Object.__proto__&&!useNative){isInstance=function(obj,ctor){if(obj instanceof ctor){return true}var p=obj;while(p){if(p===ctor.prototype){return true}p=p.__proto__}return false}}else{isInstance=function(obj,base){return obj instanceof base}}function wrapDomMethodToForceUpgrade(obj,methodName){var orig=obj[methodName];obj[methodName]=function(){var n=orig.apply(this,arguments);upgradeAll(n);return n}}wrapDomMethodToForceUpgrade(Node.prototype,"cloneNode");wrapDomMethodToForceUpgrade(document,"importNode");document.registerElement=register;document.createElement=createElement;document.createElementNS=createElementNS;scope.registry=registry;scope.instanceof=isInstance;scope.reservedTagList=reservedTagList;scope.getRegisteredDefinition=getRegisteredDefinition;document.register=document.registerElement});(function(scope){var useNative=scope.useNative;var initializeModules=scope.initializeModules;var isIE=scope.isIE;if(useNative){var nop=function(){};scope.watchShadow=nop;scope.upgrade=nop;scope.upgradeAll=nop;scope.upgradeDocumentTree=nop;scope.upgradeSubtree=nop;scope.takeRecords=nop;scope.instanceof=function(obj,base){return obj instanceof base}}else{initializeModules()}var upgradeDocumentTree=scope.upgradeDocumentTree;var upgradeDocument=scope.upgradeDocument;if(!window.wrap){if(window.ShadowDOMPolyfill){window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded;window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded}else{window.wrap=window.unwrap=function(node){return node}}}if(window.HTMLImports){window.HTMLImports.__importsParsingHook=function(elt){if(elt.import){upgradeDocument(wrap(elt.import))}}}function bootstrap(){upgradeDocumentTree(window.wrap(document));window.CustomElements.ready=true;var requestAnimationFrame=window.requestAnimationFrame||function(f){setTimeout(f,16)};requestAnimationFrame(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now();if(window.HTMLImports){window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime}document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:true}))})})}if(document.readyState==="complete"||scope.flags.eager){bootstrap()}else if(document.readyState==="interactive"&&!window.attachEvent&&(!window.HTMLImports||window.HTMLImports.ready)){bootstrap()}else{var loadEvent=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(loadEvent,bootstrap)}})(window.CustomElements)},{}],4:[function(require,module,exports){(function(self){"use strict";if(self.fetch){return}var support={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};function normalizeName(name){if(typeof name!=="string"){name=String(name)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name)){throw new TypeError("Invalid character in header field name")}return name.toLowerCase()}function normalizeValue(value){if(typeof value!=="string"){value=String(value)}return value}function iteratorFor(items){var iterator={next:function(){var value=items.shift();return{done:value===undefined,value:value}}};if(support.iterable){iterator[Symbol.iterator]=function(){return iterator}}return iterator}function Headers(headers){this.map={};if(headers instanceof Headers){headers.forEach(function(value,name){this.append(name,value)},this)}else if(headers){Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}}Headers.prototype.append=function(name,value){name=normalizeName(name);value=normalizeValue(value);var list=this.map[name];if(!list){list=[];this.map[name]=list}list.push(value)};Headers.prototype["delete"]=function(name){delete this.map[normalizeName(name)]};Headers.prototype.get=function(name){var values=this.map[normalizeName(name)];return values?values[0]:null};Headers.prototype.getAll=function(name){return this.map[normalizeName(name)]||[]};Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))};Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=[normalizeValue(value)]};Headers.prototype.forEach=function(callback,thisArg){Object.getOwnPropertyNames(this.map).forEach(function(name){this.map[name].forEach(function(value){callback.call(thisArg,value,name,this)},this)},this)};Headers.prototype.keys=function(){var items=[];this.forEach(function(value,name){items.push(name)});return iteratorFor(items)};Headers.prototype.values=function(){var items=[];this.forEach(function(value){items.push(value)});return iteratorFor(items)};Headers.prototype.entries=function(){var items=[];this.forEach(function(value,name){items.push([name,value])});return iteratorFor(items)};if(support.iterable){Headers.prototype[Symbol.iterator]=Headers.prototype.entries}function consumed(body){if(body.bodyUsed){return Promise.reject(new TypeError("Already read"))}body.bodyUsed=true}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)};reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader;reader.readAsArrayBuffer(blob);return fileReaderReady(reader)}function readBlobAsText(blob){var reader=new FileReader;reader.readAsText(blob);return fileReaderReady(reader)}function Body(){this.bodyUsed=false;this._initBody=function(body){this._bodyInit=body;if(typeof body==="string"){this._bodyText=body}else if(support.blob&&Blob.prototype.isPrototypeOf(body)){this._bodyBlob=body}else if(support.formData&&FormData.prototype.isPrototypeOf(body)){this._bodyFormData=body}else if(support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)){this._bodyText=body.toString()}else if(!body){this._bodyText=""}else if(support.arrayBuffer&&ArrayBuffer.prototype.isPrototypeOf(body)){}else{throw new Error("unsupported BodyInit type")}if(!this.headers.get("content-type")){if(typeof body==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}else if(support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)){this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}};if(support.blob){this.blob=function(){var rejected=consumed(this);if(rejected){return rejected}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){return this.blob().then(readBlobAsArrayBuffer)};this.text=function(){var rejected=consumed(this);if(rejected){return rejected}if(this._bodyBlob){return readBlobAsText(this._bodyBlob)}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}}}else{this.text=function(){var rejected=consumed(this);return rejected?rejected:Promise.resolve(this._bodyText)}}if(support.formData){this.formData=function(){return this.text().then(decode)}}this.json=function(){return this.text().then(JSON.parse)};return this}var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}function Request(input,options){options=options||{};var body=options.body;if(Request.prototype.isPrototypeOf(input)){if(input.bodyUsed){throw new TypeError("Already read")}this.url=input.url;this.credentials=input.credentials;if(!options.headers){this.headers=new Headers(input.headers)}this.method=input.method;this.mode=input.mode;if(!body){body=input._bodyInit;input.bodyUsed=true}}else{this.url=input}this.credentials=options.credentials||this.credentials||"omit";if(options.headers||!this.headers){this.headers=new Headers(options.headers)}this.method=normalizeMethod(options.method||this.method||"GET");this.mode=options.mode||this.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&body){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(body)}Request.prototype.clone=function(){return new Request(this)};function decode(body){var form=new FormData;body.trim().split("&").forEach(function(bytes){if(bytes){var split=bytes.split("=");var name=split.shift().replace(/\+/g," ");var value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}});return form}function headers(xhr){var head=new Headers;var pairs=(xhr.getAllResponseHeaders()||"").trim().split("\n");pairs.forEach(function(header){var split=header.trim().split(":");var key=split.shift().trim();var value=split.join(":").trim();head.append(key,value)});return head}Body.call(Request.prototype);function Response(bodyInit,options){if(!options){options={}}this.type="default";this.status=options.status;this.ok=this.status>=200&&this.status<300;this.statusText=options.statusText;this.headers=options.headers instanceof Headers?options.headers:new Headers(options.headers);this.url=options.url||"";this._initBody(bodyInit)}Body.call(Response.prototype);Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})};Response.error=function(){var response=new Response(null,{status:0,statusText:""});response.type="error";return response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(redirectStatuses.indexOf(status)===-1){throw new RangeError("Invalid status code")}return new Response(null,{status:status,headers:{location:url}})};self.Headers=Headers;self.Request=Request;self.Response=Response;self.fetch=function(input,init){return new Promise(function(resolve,reject){var request;if(Request.prototype.isPrototypeOf(input)&&!init){request=input}else{request=new Request(input,init)}var xhr=new XMLHttpRequest;function responseURL(){if("responseURL"in xhr){return xhr.responseURL}if(/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())){return xhr.getResponseHeader("X-Request-URL")}return}xhr.onload=function(){var options={status:xhr.status,statusText:xhr.statusText,headers:headers(xhr),url:responseURL()};var body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))};xhr.onerror=function(){reject(new TypeError("Network request failed"))};xhr.ontimeout=function(){reject(new TypeError("Network request failed"))};xhr.open(request.method,request.url,true);if(request.credentials==="include"){xhr.withCredentials=true}if("responseType"in xhr&&support.blob){xhr.responseType="blob"}request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)});xhr.send(typeof request._bodyInit==="undefined"?null:request._bodyInit)})};self.fetch.polyfill=true})(typeof self!=="undefined"?self:this)},{}],5:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Aggregator=function(){function Aggregator(element){_classCallCheck(this,Aggregator);this.element=element}_createClass(Aggregator,[{key:"aggregate",value:function aggregate(scope){var elems=this.element.querySelectorAll("input,select,textarea");for(var i=0,l=elems.length;i<l;++i){var elem=elems[i];var modelName=elem.getAttribute("sj-model");if(modelName&&modelName.substr(0,5)==="this."){var val=elem.type==="checkbox"?elem.checked:elem.value;new Function("$val","if (!"+modelName+") { "+modelName+"=$val; }").apply(scope,[val])}}}}]);return Aggregator}();module.exports=Aggregator},{}],6:[function(require,module,exports){"use strict";var Compiler=require("./compiler.js");var Aggregator=require("./aggregator.js");var IncrementalDOM=require("incremental-dom/dist/incremental-dom.js");window.addEventListener("DOMContentLoaded",function(){var elems=document.querySelectorAll("[sj-app]");var _loop=function _loop(i,l){var elem=elems[i];var template=document.createElement("div");var attributes=elem.attributes;for(var _i=0,_l=attributes.length;_i<_l;_i++){var attr=attributes[_i];template.setAttribute(attr.name,attr.value)}new Aggregator(elem).aggregate(template);var compiled=(new Compiler).compile(elem);template.update=function(){var _this=this;IncrementalDOM.patch(this,function(){compiled.apply(_this,[IncrementalDOM])})};var app=elem.getAttribute("sj-app");var replaced=elem.parentNode.replaceChild(template,elem);if(app){var func=window[app];if(func){func.apply(template)}else{throw"Unknown function '"+app+"', specefied by sj-app"}}template.update()};for(var i=0,l=elems.length;i<l;++i){_loop(i,l)}})},{"./aggregator.js":5,"./compiler.js":7,"incremental-dom/dist/incremental-dom.js":1}],7:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var IncrementalDOM=require("incremental-dom/dist/incremental-dom.js");var assert=function assert(val){};IncrementalDOM.attributes.value=function(el,name,value){el.value=value};var sj_attr2event={"sj-click":"onclick","sj-blur":"onblur","sj-checked":"onchecked","sj-dblclick":"ondblclick","sj-focus":"onfocus","sj-keydown":"onkeydown","sj-keypress":"onkeypress","sj-keyup":"onkeyup","sj-mousedown":"onmousedown","sj-mouseenter":"onmouseenter","sj-mouseleave":"onmouseleave","sj-mousemove":"onmousemove","sj-mouseover":"onmouseover","sj-mouseup":"onmouseup","sj-paste":"onpaste","sj-selected":"onselected","sj-change":"onchange","sj-submit":"onsubmit"};var sj_boolean_attributes={"sj-disabled":"disabled","sj-required":"required","sj-checked":"checked"};var Compiler=function(){function Compiler(){_classCallCheck(this,Compiler);assert(arguments.length===0)}_createClass(Compiler,[{key:"compile",value:function compile(templateElement){var children=templateElement.childNodes;var code=[];for(var i=0;i<children.length;++i){code=code.concat(this.renderDOM(children[i],[]))}return new Function("IncrementalDOM",code.join(";\n"))}},{key:"renderDOM",value:function renderDOM(elem,vars){assert(elem);assert(vars);if(elem.nodeType===Node.TEXT_NODE){return["IncrementalDOM.text("+this.text(elem.textContent)+")"]}else if(elem.nodeType===Node.COMMENT_NODE){return[]}var tagName=elem.tagName.toLowerCase();{var cond=elem.getAttribute("sj-if");if(cond){var body=[";"];body.push("if ("+cond+") {");body.push('IncrementalDOM.elementOpenStart("'+tagName+'")');body=body.concat(this.renderAttributes(elem,vars));body.push('IncrementalDOM.elementOpenEnd("'+tagName+'")');body=body.concat(this.renderBody(elem,vars));body.push('IncrementalDOM.elementClose("'+tagName+'")');body.push("}");return body}}{var _cond=elem.getAttribute("sj-repeat");if(_cond){var m=_cond.match(/^\s*(?:(\w+)|\(\s*(\w+)\s*,\s*(\w+)\s*\))\s+in\s+([a-z][a-z0-9.]*)\s*$/);if(!m){throw"Invalid sj-repeat value: "+_cond}if(m[1]){var varName=m[1];var container=m[4];var body=[";"];body.push('IncrementalDOM.elementOpenStart("'+tagName+'")');body=body.concat(this.renderAttributes(elem,vars));body.push('IncrementalDOM.elementOpenEnd("'+tagName+'")');body.push("(function(IncrementalDOM) {\nvar $$container="+container+";\nfor (var $index=0,$l=$$container.length; $index<$l; $index++) {\nvar "+varName+"=$$container[$index];");body=body.concat(this.renderBody(elem,vars.concat([varName,"$index"])));body.push("}\n}).apply(this, [IncrementalDOM]);");body.push('IncrementalDOM.elementClose("'+tagName+'")');return body}else{var keyName=m[2];var valueName=m[3];var _container=m[4];var body=[";"];body.push('IncrementalDOM.elementOpenStart("'+tagName+'")');body=body.concat(this.renderAttributes(elem,vars));body.push('IncrementalDOM.elementOpenEnd("'+tagName+'")');body.push("(function(IncrementalDOM) {\nvar $$container="+_container+";for (var "+keyName+" in $$container) {\nvar "+valueName+"=$$container["+keyName+"];");body=body.concat(this.renderBody(elem,vars.concat([keyName,valueName])));body.push("}\n}).apply(this, [IncrementalDOM]);");body.push('IncrementalDOM.elementClose("'+tagName+'")');return body}}}var body=[";"];body.push('IncrementalDOM.elementOpenStart("'+tagName+'")');body=body.concat(this.renderAttributes(elem,vars));body.push('IncrementalDOM.elementOpenEnd("'+tagName+'")');body=body.concat(this.renderBody(elem,vars));body.push('IncrementalDOM.elementClose("'+tagName+'")');return body}},{key:"renderBody",value:function renderBody(elem,vars){var body=[];var bind=elem.getAttribute("sj-bind");var tagName=elem.tagName.toLowerCase();if(tagName.indexOf("-")>=0){body.push("IncrementalDOM.skip()")}else if(bind){body.push("IncrementalDOM.text("+bind+");")}else{var children=elem.childNodes;for(var i=0,l=children.length;i<l;++i){var child=children[i];if(child.nodeType===Node.TEXT_NODE){body.push("IncrementalDOM.text("+this.text(child.textContent)+")")}else{body=body.concat(this.renderDOM(child,vars))}}}return body}},{key:"renderAttributes",value:function renderAttributes(elem,vars){assert(vars);var attrs=elem.attributes;var codeList=[];var model=elem.getAttribute("sj-model");var events={};for(var i=0,l=attrs.length;i<l;++i){var attr=attrs[i];var code=this.renderAttribute(elem,attrs[i],vars,events);codeList.push(code)}var normalEvents=["onclick","onblur","onchecked","ondblclick","onfocus","onkeydown","onkeypress","onkeyup","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseover","onmouseup","onpaste","onselected","onsubmit"];if(model){if(elem.type==="checkbox"||elem.type==="radio"){normalEvents.push("oninput");var _code=events["onchange"]||"";codeList.push("\n          if ("+model+') {\n            IncrementalDOM.attr("checked", \'checked\');\n          }\n          IncrementalDOM.attr("onchange", function ('+vars.concat(["$event"]).join(",")+") {\n            "+model+" = $event.target.checked;\n            "+_code+";\n            this.update();\n          }.bind("+["this"].concat(vars).join(",")+"));\n        ")}else{normalEvents.push("onchange");var _code2=events["oninput"]||"";codeList.push('\n          IncrementalDOM.attr("value", '+model+');\n          IncrementalDOM.attr("oninput", function ('+vars.concat(["$event"]).join(",")+") {\n            "+model+" = $event.target.value;\n            "+_code2+";\n            this.update();\n          }.bind("+["this"].concat(vars).join(",")+"));\n        ")}}for(var _i=0,_l=normalEvents.length;_i<_l;_i++){var eventName=normalEvents[_i];var expression=events[eventName];if(expression){codeList.push(';\n        IncrementalDOM.attr("'+eventName+'", function ('+vars.concat(["$event"]).join(",")+") {\n          "+expression+";\n        }.bind("+["this"].concat(vars).join(",")+"));")}}return codeList}},{key:"renderAttribute",value:function renderAttribute(elem,attr,vars,events){assert(vars);var attrName=attr.name;if(attrName.substr(0,3)==="sj-"){var event=sj_attr2event[attrName];if(event){var expression=attr.value;events[event]=expression;return""}else if(sj_boolean_attributes[attr.name]){var attribute=sj_boolean_attributes[attr.name];var _expression=attr.value;return"if ("+_expression+') { IncrementalDOM.attr("'+attribute+'", "'+attribute+'"); }'}else if(attr.name==="sj-class"){return'IncrementalDOM.attr("class", '+attr.value+'.join(" "));'}else if(attr.name==="sj-href"){return'IncrementalDOM.attr("href", '+attr.value+".replace(/^[^:]+?:/, function (scheme) { return (scheme === 'http:' || scheme === 'https://') ? scheme : 'unsafe:' + scheme }));"}else if(attr.name.substr(0,8)==="sj-attr-"){return"IncrementalDOM.attr("+JSON.stringify(attr.name.substr(8))+", "+attr.value+");"}else{return""}}else{return'IncrementalDOM.attr("'+attr.name+'", '+this.text(attr.value)+");"}}},{key:"text",value:function text(s){return JSON.stringify(s)}}]);return Compiler}();module.exports=Compiler},{"incremental-dom/dist/incremental-dom.js":1}],8:[function(require,module,exports){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Compiler=require("./compiler.js");var Aggregator=require("./aggregator.js");var IncrementalDOM=require("incremental-dom/dist/incremental-dom.js");if(typeof HTMLElement!=="function"){var _HTMLElement=function _HTMLElement(){};_HTMLElement.prototype=HTMLElement.prototype;HTMLElement=_HTMLElement}var scopes={};var compiled={};var Element=function(_HTMLElement2){_inherits(Element,_HTMLElement2);function Element(){_classCallCheck(this,Element);return _possibleConstructorReturn(this,Object.getPrototypeOf(Element).apply(this,arguments))}_createClass(Element,[{key:"createdCallback",value:function createdCallback(){if(!scopes[this.tagName]){var template=this.template();if(!template){throw"template shouldn't be null"}var html=document.createElement("div");html.innerHTML=template;scopes[this.tagName]=this.default();new Aggregator(html).aggregate(scopes[this.tagName]);compiled[this.tagName]=(new Compiler).compile(html)}var def={};var scope=scopes[this.tagName];for(var key in scope){if(scope.hasOwnProperty(key)){def[key]=scope[key]}}for(var _key in def){if(def.hasOwnProperty(_key)){this[_key]=def[_key]}}this.initialize();this.update()}},{key:"default",value:function _default(){return{}}},{key:"template",value:function template(){throw"Please implement 'template' method"}},{key:"initialize",value:function initialize(){}},{key:"update",value:function update(){var _this2=this;IncrementalDOM.patch(this,function(){compiled[_this2.tagName].apply(_this2,[IncrementalDOM])})}},{key:"dump",value:function dump(){var _this3=this;var scope={};Object.keys(this).forEach(function(key){if(key!=="renderer"){scope[key]=_this3[key]}});return scope}}]);return Element}(HTMLElement);module.exports=Element},{"./aggregator.js":5,"./compiler.js":7,"incremental-dom/dist/incremental-dom.js":1}],9:[function(require,module,exports){"use strict";(function(){if(typeof window.CustomEvent==="function")return false;function CustomEvent(event,params){params=params||{bubbles:false,cancelable:false,detail:undefined};var evt=document.createEvent("CustomEvent");evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt}CustomEvent.prototype=window.Event.prototype;window.CustomEvent=CustomEvent})();function fireEvent(element,eventName,options){var event=new CustomEvent(eventName,options);element.dispatchEvent(event)}module.exports=fireEvent},{}],10:[function(require,module,exports){"use strict";require("webcomponents.js/CustomElements.js");require("./polyfill.js");require("whatwg-fetch/fetch.js");var tag=require("./tag.js");var Element=require("./element.js");require("./app.js");module.exports.Element=Element;module.exports.tag=tag;module.exports.fireEvent=require("./fire-event.js")},{"./app.js":6,"./element.js":8,"./fire-event.js":9,"./polyfill.js":11,"./tag.js":12,"webcomponents.js/CustomElements.js":3,"whatwg-fetch/fetch.js":4}],11:[function(require,module,exports){"use strict";require("webcomponents.js/CustomElements.js");if(!window.customElements){window.customElements={define:function define(name,elem){document.registerElement(name,elem)}}}},{"webcomponents.js/CustomElements.js":3}],12:[function(require,module,exports){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Compiler=require("./compiler");var IncrementalDOM=require("incremental-dom/dist/incremental-dom.js");var Aggregator=require("./aggregator.js");var Element=require("./element.js");var objectAssign=require("object-assign");var unwrapComment=/\/\*!?(?:\@preserve)?[ \t]*(?:\r\n|\n)([\s\S]*?)(?:\r\n|\n)\s*\*\//;var knownOpts=["template","accessors","default","events","initialize","attributes","methods"];var knownOptMap={};knownOpts.forEach(function(e){knownOptMap[e]=e});function tag(tagName,opts){for(var key in opts){if(!knownOptMap[key]){throw"Unknown options for sj.tag: "+tagName+":"+key+"(Known keys: "+knownOpts+")"}}var defaultValue=objectAssign({},opts.default);var attributes=opts.attributes||{};var _template=void 0;var elementClass=function(_Element){_inherits(elementClass,_Element);function elementClass(){_classCallCheck(this,elementClass);return _possibleConstructorReturn(this,Object.getPrototypeOf(elementClass).apply(this,arguments))}_createClass(elementClass,[{key:"template",value:function template(){if(!_template){if(typeof opts.template==="function"){_template=unwrapComment.exec(opts.template.toString())[1]}else{_template=opts.template}}return _template}},{key:"default",value:function _default(){return defaultValue}},{key:"initialize",value:function initialize(){if(opts.events){for(var event in opts.events){this.addEventListener(event,opts.events[event].bind(this))}}var attrs=this.attributes;for(var i=0,l=attrs.length;i<l;++i){var attr=attrs[i];var _key=attr.name;if(_key.substr(0,8)!=="sj-attr-"){var cb=attributes[_key];if(cb){cb.apply(this,[attr.value])}}}if(opts.initialize){opts.initialize.apply(this)}}},{key:"attributeChangedCallback",value:function attributeChangedCallback(key){if(key.substr(0,8)==="sj-attr-"){return}var cb=attributes[key];if(cb){cb.apply(this,[this.getAttribute(key)]);this.update()}}}]);return elementClass}(Element);if(opts.methods){for(var name in opts.methods){elementClass.prototype[name]=opts.methods[name]}}if(opts.accessors){for(var _name in opts.accessors){Object.defineProperty(elementClass.prototype,_name,{
get:opts.accessors[_name].get,set:opts.accessors[_name].set})}}customElements.define(tagName,elementClass)}module.exports=tag},{"./aggregator.js":5,"./compiler":7,"./element.js":8,"incremental-dom/dist/incremental-dom.js":1,"object-assign":2}]},{},[10])(10)});
//# sourceMappingURL=dist/sj.bundle.min.js.map